# File API í…ŒìŠ¤íŠ¸ ê³„íšì„œ

## ğŸ“‹ ë¬¸ì„œ ëª©ì°¨

1. [í…ŒìŠ¤íŠ¸ ê°œìš”](#1-í…ŒìŠ¤íŠ¸-ê°œìš”)
2. [í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ êµ¬ì¡° ë° ì˜ì¡´ì„±](#2-í…ŒìŠ¤íŠ¸-ëª¨ë“ˆ-êµ¬ì¡°-ë°-ì˜ì¡´ì„±)
3. [ê¸°ëŠ¥ í”Œë¡œìš°ì™€ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë§¤í•‘](#3-ê¸°ëŠ¥-í”Œë¡œìš°ì™€-í…ŒìŠ¤íŠ¸-í•¨ìˆ˜-ë§¤í•‘)
4. [ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ë³„ í…ŒìŠ¤íŠ¸ ë§¤í•‘](#4-ì‚¬ìš©ì-ì‹œë‚˜ë¦¬ì˜¤ë³„-í…ŒìŠ¤íŠ¸-ë§¤í•‘)
5. [êµ¬í˜„ ìˆœì„œ ì œì•ˆ](#5-êµ¬í˜„-ìˆœì„œ-ì œì•ˆ)
6. [í…ŒìŠ¤íŠ¸ í™˜ê²½ ë° Mock ì •ì±…](#6-í…ŒìŠ¤íŠ¸-í™˜ê²½-ë°-mock-ì •ì±…)

---

## 1. í…ŒìŠ¤íŠ¸ ê°œìš”

File APIì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ íŒŒì¼ ì—…ë¡œë“œ, ì¡°íšŒ, ì‚­ì œ ì‹œìŠ¤í…œì— ëŒ€í•œ ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì œì•ˆí•©ë‹ˆë‹¤. TDD ì›ì¹™ì„ ì¤€ìˆ˜í•˜ë©°, ì‹¤ì œ ì‚¬ìš©ì í”Œë¡œìš° ê¸°ë°˜ì˜ ì‹¤ìš©ì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.

**í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ê¸°ëŠ¥:**
- íŒŒì¼ ì—…ë¡œë“œ ë° ê²€ì¦
- íŒŒì¼ ë©”íƒ€ë°ì´í„° ê´€ë¦¬
- íŒŒì¼ ì¡°íšŒ ë° ì„œë¹™
- íŒŒì¼ ì‚­ì œ ë° ì°¸ì¡° ì •ë¦¬
- ê¶Œí•œ ë° ë³´ì•ˆ ê²€ì¦

---

## 2. í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ êµ¬ì¡° ë° ì˜ì¡´ì„±

### í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ êµ¬ì¡° (ì˜ì¡´ì„± ê´€ê³„)

```
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ test_file_validator.py        # ğŸ”µ ê¸°ë°˜ (ì˜ì¡´ì„± ì—†ìŒ)
â”‚   â”‚   â”œâ”€â”€ test_validate_file_type()
â”‚   â”‚   â”œâ”€â”€ test_validate_file_size()
â”‚   â”‚   â”œâ”€â”€ test_validate_file_count()
â”‚   â”‚   â””â”€â”€ test_validate_security_rules()
â”‚   â”œâ”€â”€ test_file_storage.py          # ğŸ”µ ê¸°ë°˜ (ì˜ì¡´ì„± ì—†ìŒ)
â”‚   â”‚   â”œâ”€â”€ test_generate_file_path()
â”‚   â”‚   â”œâ”€â”€ test_save_physical_file()
â”‚   â”‚   â””â”€â”€ test_cleanup_file_system()
â”‚   â”œâ”€â”€ test_file_metadata.py         # ğŸŸ¡ ì¡°í•© (validator ì˜ì¡´)
â”‚   â”‚   â”œâ”€â”€ test_extract_file_metadata()
â”‚   â”‚   â”œâ”€â”€ test_create_file_document()
â”‚   â”‚   â””â”€â”€ test_update_file_references()
â”‚   â””â”€â”€ test_file_permissions.py      # ğŸ”µ ê¸°ë°˜ (ì˜ì¡´ì„± ì—†ìŒ)
â”‚       â”œâ”€â”€ test_check_upload_permission()
â”‚       â”œâ”€â”€ test_check_delete_permission()
â”‚       â””â”€â”€ test_validate_user_quota()
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ test_file_upload_service.py   # ğŸ”´ í†µí•© (ëª¨ë“  ê¸°ëŠ¥ ì˜ì¡´)
â”‚   â”‚   â”œâ”€â”€ test_full_upload_flow()
â”‚   â”‚   â”œâ”€â”€ test_upload_with_metadata()
â”‚   â”‚   â””â”€â”€ test_upload_error_handling()
â”‚   â”œâ”€â”€ test_file_retrieval_service.py # ğŸ”´ í†µí•© (storage + metadata ì˜ì¡´)
â”‚   â”‚   â”œâ”€â”€ test_file_serving_flow()
â”‚   â”‚   â”œâ”€â”€ test_metadata_retrieval()
â”‚   â”‚   â””â”€â”€ test_file_not_found_handling()
â”‚   â””â”€â”€ test_file_deletion_service.py # ğŸ”´ í†µí•© (ëª¨ë“  ê¸°ëŠ¥ ì˜ì¡´)
â”‚       â”œâ”€â”€ test_complete_deletion_flow()
â”‚       â”œâ”€â”€ test_reference_cleanup()
â”‚       â””â”€â”€ test_deletion_permission_flow()
â””â”€â”€ contract/
    â””â”€â”€ test_file_api_contract.py     # ğŸŸ  ê³„ì•½ (API ì˜ì¡´)
        â”œâ”€â”€ test_upload_api_contract()
        â”œâ”€â”€ test_retrieval_api_contract()
        â””â”€â”€ test_deletion_api_contract()
```

### ëª¨ë“ˆ ê°„ ê´€ê³„ ì‹œê°í™”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ ì˜ì¡´ì„± ê·¸ë˜í”„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                      â”‚
â”‚  ğŸ”µ ê¸°ë°˜ ê³„ì¸µ (ë…ë¦½ì )                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ test_file_      â”‚  â”‚ test_file_      â”‚  â”‚ test_file_      â”‚      â”‚
â”‚  â”‚ validator.py    â”‚  â”‚ storage.py      â”‚  â”‚ permissions.py  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚           â”‚                     â”‚                     â”‚             â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                     â–¼                       â–¼                       â”‚
â”‚  ğŸŸ¡ ì¡°í•© ê³„ì¸µ (ê¸°ë°˜ ê¸°ëŠ¥ í™œìš©)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚ test_file_      â”‚                                                 â”‚
â”‚  â”‚ metadata.py     â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚           â”‚                                                          â”‚
â”‚           â–¼                                                          â”‚
â”‚  ğŸ”´ í†µí•© ê³„ì¸µ (ëª¨ë“  ê¸°ëŠ¥ í†µí•©)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ test_file_      â”‚  â”‚ test_file_      â”‚  â”‚ test_file_      â”‚      â”‚
â”‚  â”‚ upload_service  â”‚  â”‚ retrieval_      â”‚  â”‚ deletion_       â”‚      â”‚
â”‚  â”‚ .py             â”‚  â”‚ service.py      â”‚  â”‚ service.py      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚           â”‚                     â”‚                     â”‚             â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                     â–¼                       â–¼                       â”‚
â”‚  ğŸŸ  ê³„ì•½ ê³„ì¸µ (API ì¸í„°í˜ì´ìŠ¤)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚ test_file_api_  â”‚                                                 â”‚
â”‚  â”‚ contract.py     â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ê¸°ëŠ¥ í”Œë¡œìš°ì™€ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë§¤í•‘

### í”Œë¡œìš° ì‹œê°í™”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ File API í”Œë¡œìš° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚  ğŸ“¤ íŒŒì¼ ì—…ë¡œë“œ: ìš”ì²­ â†’ ê²€ì¦ â†’ ì €ì¥ â†’ ë©”íƒ€ë°ì´í„° â†’ ì‘ë‹µ                   â”‚
â”‚  ğŸ“¥ íŒŒì¼ ì¡°íšŒ: ìš”ì²­ â†’ ê¶Œí•œí™•ì¸ â†’ íŒŒì¼ê²€ìƒ‰ â†’ ì„œë¹™                          â”‚
â”‚  ğŸ—‘ï¸ íŒŒì¼ ì‚­ì œ: ìš”ì²­ â†’ ê¶Œí•œí™•ì¸ â†’ ì°¸ì¡°ì •ë¦¬ â†’ ë¬¼ë¦¬ì‚­ì œ â†’ ì‘ë‹µ                â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Upload Flow ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë§¤í•‘

- **ğŸ“¤ íŒŒì¼ ì—…ë¡œë“œ ìš”ì²­ ë‹¨ê³„**: 
  - `test_upload_api_contract()` - API ìš”ì²­ í˜•ì‹ ê²€ì¦
  - `test_multipart_parsing()` - multipart/form-data íŒŒì‹±

- **ğŸ” íŒŒì¼ ê²€ì¦ ë‹¨ê³„**: 
  - `test_validate_file_type()` - MIME íƒ€ì… ë° í™•ì¥ì ê²€ì¦
  - `test_validate_file_size()` - íŒŒì¼ í¬ê¸° ì œí•œ ê²€ì¦
  - `test_validate_file_count()` - ì²¨ë¶€ ê°œìˆ˜ ì œí•œ ê²€ì¦
  - `test_validate_security_rules()` - ì•…ì„± íŒŒì¼ ì°¨ë‹¨

- **ğŸ’¾ íŒŒì¼ ì €ì¥ ë‹¨ê³„**: 
  - `test_generate_file_path()` - ì €ì¥ ê²½ë¡œ ìƒì„±
  - `test_save_physical_file()` - ë¬¼ë¦¬ì  íŒŒì¼ ì €ì¥
  - `test_create_file_document()` - ë©”íƒ€ë°ì´í„° DB ì €ì¥

- **ğŸ“¤ ì‘ë‹µ ë‹¨ê³„**: 
  - `test_upload_response_contract()` - API ì‘ë‹µ í˜•ì‹ ê²€ì¦
  - `test_upload_error_handling()` - ì˜¤ë¥˜ ì‘ë‹µ ì²˜ë¦¬

### Retrieval Flow ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë§¤í•‘

- **ğŸ“¥ íŒŒì¼ ì¡°íšŒ ìš”ì²­**: 
  - `test_retrieval_api_contract()` - API ìš”ì²­ í˜•ì‹
  - `test_file_id_validation()` - íŒŒì¼ ID ìœ íš¨ì„±

- **ğŸ” íŒŒì¼ ê²€ìƒ‰**: 
  - `test_find_file_by_id()` - DBì—ì„œ íŒŒì¼ ê²€ìƒ‰
  - `test_file_not_found_handling()` - íŒŒì¼ ì—†ìŒ ì²˜ë¦¬

- **ğŸ“¤ íŒŒì¼ ì„œë¹™**: 
  - `test_file_serving_flow()` - ì‹¤ì œ íŒŒì¼ ë°˜í™˜
  - `test_cache_headers()` - ìºì‹œ í—¤ë” ì„¤ì •

### Deletion Flow ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë§¤í•‘

- **ğŸ—‘ï¸ ì‚­ì œ ìš”ì²­**: 
  - `test_deletion_api_contract()` - API ìš”ì²­ í˜•ì‹
  - `test_check_delete_permission()` - ì‚­ì œ ê¶Œí•œ ê²€ì¦

- **ğŸ”— ì°¸ì¡° ì •ë¦¬**: 
  - `test_reference_cleanup()` - posts/commentsì—ì„œ file_id ì œê±°
  - `test_cleanup_file_system()` - ë¬¼ë¦¬ì  íŒŒì¼ ì‚­ì œ

- **ğŸ“¤ ì‚­ì œ ì‘ë‹µ**: 
  - `test_deletion_response()` - ì‚­ì œ ê²°ê³¼ ì‘ë‹µ
  - `test_cleanup_report()` - ì •ë¦¬ëœ ì°¸ì¡° ë³´ê³ 

---

## 4. ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ë³„ í…ŒìŠ¤íŠ¸ ë§¤í•‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ â†’ í…ŒìŠ¤íŠ¸ ë§¤í•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                            â”‚
â”‚  ğŸŒŸ ì£¼ ì‹œë‚˜ë¦¬ì˜¤ (Happy Path)                                â”‚
â”‚  "ì¸ì¦ëœ ì‚¬ìš©ìê°€ ìœ íš¨í•œ ì´ë¯¸ì§€ë¥¼ ê²Œì‹œê¸€ì— ì²¨ë¶€"              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì‹œë‚˜ë¦¬ì˜¤: ë¡œê·¸ì¸ â†’ íŒŒì¼ì„ íƒ â†’ ì—…ë¡œë“œ â†’ ê²Œì‹œê¸€ì‘ì„± â†’ í‘œì‹œ   â”‚ â”‚
â”‚  â”‚ í…ŒìŠ¤íŠ¸: test_validate_file_type()                      â”‚ â”‚
â”‚  â”‚        test_save_physical_file()                       â”‚ â”‚
â”‚  â”‚        test_full_upload_flow()                         â”‚ â”‚
â”‚  â”‚        test_file_serving_flow()                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚
â”‚  âš ï¸ ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤ (Error Cases)                             â”‚
â”‚  "ì˜ëª»ëœ íŒŒì¼ì´ë‚˜ ê¶Œí•œ ë¬¸ì œë¡œ ì—…ë¡œë“œ ì‹¤íŒ¨"                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì‹œë‚˜ë¦¬ì˜¤: ëŒ€ìš©ëŸ‰íŒŒì¼ â†’ í¬ê¸°ì´ˆê³¼ ì˜¤ë¥˜ â†’ ì‚¬ìš©ì ì•ˆë‚´          â”‚ â”‚
â”‚  â”‚ í…ŒìŠ¤íŠ¸: test_validate_file_size()                      â”‚ â”‚
â”‚  â”‚        test_file_size_error_handling()                 â”‚ â”‚
â”‚  â”‚        test_upload_error_handling()                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚
â”‚  ğŸ”§ ì˜ˆì™¸ ì‹œë‚˜ë¦¬ì˜¤ (Edge Cases)                              â”‚
â”‚  "ë™ì‹œ ì—…ë¡œë“œ, ê¶Œí•œ ë³€ê²½, íŒŒì¼ ì‚­ì œ ë“± ë³µí•© ìƒí™©"              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì‹œë‚˜ë¦¬ì˜¤: ê°™ì€ ì‚¬ìš©ìê°€ ë™ì‹œì— ì—¬ëŸ¬ íŒŒì¼ ì—…ë¡œë“œ             â”‚ â”‚
â”‚  â”‚ í…ŒìŠ¤íŠ¸: test_concurrent_upload_handling()              â”‚ â”‚
â”‚  â”‚        test_validate_user_quota()                      â”‚ â”‚
â”‚  â”‚        test_rate_limiting()                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚
â”‚  ğŸ” ë³´ì•ˆ ì‹œë‚˜ë¦¬ì˜¤ (Security Cases)                          â”‚
â”‚  "ì•…ì„± íŒŒì¼ ì—…ë¡œë“œ ì‹œë„, ê¶Œí•œ ìš°íšŒ ì‹œë„"                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì‹œë‚˜ë¦¬ì˜¤: ì•…ì„±ì½”ë“œ íŒŒì¼ â†’ ë³´ì•ˆê²€ì¦ â†’ ì—…ë¡œë“œ ì°¨ë‹¨           â”‚ â”‚
â”‚  â”‚ í…ŒìŠ¤íŠ¸: test_validate_security_rules()                 â”‚ â”‚
â”‚  â”‚        test_malicious_file_detection()                 â”‚ â”‚
â”‚  â”‚        test_unauthorized_deletion_attempt()            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. êµ¬í˜„ ìˆœì„œ ì œì•ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ êµ¬í˜„ ë‹¨ê³„ë³„ ë¡œë“œë§µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                   â”‚
â”‚  1ï¸âƒ£ 1ë‹¨ê³„: ğŸŸ¦ í•„ìˆ˜ (MVP) - í•µì‹¬ íŒŒì¼ ê¸°ëŠ¥          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“‹ íŒŒì¼ ê²€ì¦ (ê¸°ë°˜ ê¸°ëŠ¥)                     â”‚ â”‚
â”‚  â”‚ â‘  test_validate_file_type() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬    â”‚ â”‚
â”‚  â”‚ â‘¡ test_validate_file_size() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬    â”‚ â”‚
â”‚  â”‚ â‘¢ test_validate_security_rules() ğŸŸ¡ ì¤‘ê¸‰ âš¡ë³‘ë ¬ â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ“‹ íŒŒì¼ ì €ì¥ (ê¸°ë°˜ ê¸°ëŠ¥)                     â”‚ â”‚
â”‚  â”‚ â‘£ test_generate_file_path() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬    â”‚ â”‚
â”‚  â”‚ â‘¤ test_save_physical_file() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨   â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ“‹ ì—…ë¡œë“œ í†µí•© í”Œë¡œìš°                        â”‚ â”‚
â”‚  â”‚ â‘¥ test_full_upload_flow() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨     â”‚ â”‚
â”‚  â”‚ â‘¦ test_upload_error_handling() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ”Œ API ê³„ì•½ ê²€ì¦                           â”‚ â”‚
â”‚  â”‚ â‘§ test_upload_api_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                   â”‚
â”‚  2ï¸âƒ£ 2ë‹¨ê³„: ğŸŸ¡ ê¶Œì¥ (ì•ˆì •í™”) - ì¡°íšŒ ë° ì‚­ì œ ê¸°ëŠ¥    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“‹ íŒŒì¼ ì¡°íšŒ ê¸°ëŠ¥                            â”‚ â”‚
â”‚  â”‚ â‘  test_file_serving_flow() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨    â”‚ â”‚
â”‚  â”‚ â‘¡ test_metadata_retrieval() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬   â”‚ â”‚
â”‚  â”‚ â‘¢ test_file_not_found_handling() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬ â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ“‹ íŒŒì¼ ì‚­ì œ ê¸°ëŠ¥                            â”‚ â”‚
â”‚  â”‚ â‘£ test_check_delete_permission() ğŸŸ¡ ì¤‘ê¸‰ âš¡ë³‘ë ¬ â”‚ â”‚
â”‚  â”‚ â‘¤ test_complete_deletion_flow() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘¥ test_reference_cleanup() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨    â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ”Œ API ê³„ì•½ í™•ì¥                           â”‚ â”‚
â”‚  â”‚ â‘¦ test_retrieval_api_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘§ test_deletion_api_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                   â”‚
â”‚  3ï¸âƒ£ 3ë‹¨ê³„: ğŸŸ¢ ì„ íƒ (ìµœì í™”) - ê³ ê¸‰ ê¸°ëŠ¥ ë° ìµœì í™”   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“‹ ì„±ëŠ¥ ë° ë³´ì•ˆ ê°•í™”                         â”‚ â”‚
â”‚  â”‚ â‘  test_concurrent_upload_handling() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘¡ test_malicious_file_detection() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘¢ test_rate_limiting() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨        â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ“‹ ì‚¬ìš©ì ê²½í—˜ ê°œì„                           â”‚ â”‚
â”‚  â”‚ â‘£ test_validate_user_quota() ğŸŸ¡ ì¤‘ê¸‰ âš¡ë³‘ë ¬   â”‚ â”‚
â”‚  â”‚ â‘¤ test_cache_headers() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬        â”‚ â”‚
â”‚  â”‚ â‘¥ test_file_metadata_extraction() ğŸŸ¡ ì¤‘ê¸‰ âš¡ë³‘ë ¬ â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ”Œ ê³ ê¸‰ ê³„ì•½ í…ŒìŠ¤íŠ¸                         â”‚ â”‚
â”‚  â”‚ â‘¦ test_error_response_contracts() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘§ test_security_response_contracts() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                   â”‚
â”‚  ğŸ’¡ êµ¬í˜„ íŒ:                                    â”‚
â”‚  â€¢ âš¡ë³‘ë ¬: ë…ë¦½ì  ì‹¤í–‰ ê°€ëŠ¥ (ìƒíƒœ ë³€ê²½ ì—†ìŒ)        â”‚
â”‚  â€¢ ğŸ”„ìˆœì°¨: ìˆœì°¨ ì‹¤í–‰ í•„ìš” (íŒŒì¼ì‹œìŠ¤í…œ/DB ì‚¬ìš©)     â”‚
â”‚  â€¢ ğŸŸ¢ ì´ˆê¸‰ â†’ ğŸŸ¡ ì¤‘ê¸‰ â†’ ğŸ”´ ê³ ê¸‰ ìˆœì„œë¡œ ì§„í–‰       â”‚
â”‚  â€¢ 1ë‹¨ê³„ ì™„ë£Œ ì‹œì ì—ì„œ ê¸°ë³¸ íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ ë™ì‘    â”‚
â”‚  â€¢ 2ë‹¨ê³„ ì™„ë£Œ ì‹œì ì—ì„œ ì™„ì „í•œ íŒŒì¼ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•  â”‚
â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. í…ŒìŠ¤íŠ¸ í™˜ê²½ ë° Mock ì •ì±…

### Mock ì‚¬ìš© ì •ì±…

**í—ˆìš© ì¡°ê±´**: ì´ë¯¸ êµ¬í˜„ ì™„ë£Œëœ ê¸°ëŠ¥ ì¤‘ í˜¸ì¶œ ë¹„ìš©ì´ ë†’ì€ ê²½ìš°

```python
def test_file_upload_with_notification():
    """
    ğŸš¨ Mock ì‚¬ìš©: NotificationService
    ì´ìœ : ì™¸ë¶€ ì´ë©”ì¼ ì„œë¹„ìŠ¤ í˜¸ì¶œë¡œ ì¸í•œ ë„¤íŠ¸ì›Œí¬ ì˜ì¡´ì„±
    ëŒ€ì•ˆ ì—†ì´ ì§„í–‰ ì‹œ: í…ŒìŠ¤íŠ¸ ë¶ˆì•ˆì •ì„±, ì‹¤í–‰ ì‹œê°„ ì¦ê°€
    """
    # ì´ë¯¸ êµ¬í˜„ ì™„ë£Œëœ NotificationServiceë¥¼ Mockìœ¼ë¡œ ì²˜ë¦¬
    pass

def test_file_storage_without_mock():
    """
    Mock ë¯¸ì‚¬ìš©: ë¡œì»¬ íŒŒì¼ì‹œìŠ¤í…œ ì €ì¥
    ì´ìœ : ë¹ ë¥¸ ì‹¤í–‰, ì‹¤ì œ íŒŒì¼ I/O ê²€ì¦ í•„ìš”
    """
    # ì‹¤ì œ ì„ì‹œ ë””ë ‰í† ë¦¬ì— íŒŒì¼ ì €ì¥/ì‚­ì œë¡œ í…ŒìŠ¤íŠ¸
    pass
```

### í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì„±

```python
# conftest.py ì„¤ì •
@pytest.fixture
def temp_upload_dir():
    """í…ŒìŠ¤íŠ¸ìš© ì„ì‹œ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬"""
    temp_dir = Path("test_uploads")
    temp_dir.mkdir(exist_ok=True)
    yield temp_dir
    shutil.rmtree(temp_dir)  # í…ŒìŠ¤íŠ¸ í›„ ì •ë¦¬

@pytest.fixture  
def sample_image_file():
    """í…ŒìŠ¤íŠ¸ìš© ìƒ˜í”Œ ì´ë¯¸ì§€ íŒŒì¼"""
    # 1x1 PNG ì´ë¯¸ì§€ ìƒì„±
    img_data = base64.b64decode(MINIMAL_PNG_BASE64)
    return BytesIO(img_data)

@pytest.fixture
def mock_db_collection():
    """í…ŒìŠ¤íŠ¸ìš© MongoDB ì»¬ë ‰ì…˜ Mock"""
    # ì‹¤ì œ DB ì—°ê²° ì—†ì´ MongoDB ë™ì‘ ì‹œë®¬ë ˆì´ì…˜
    pass
```

### í”„ë¡ íŠ¸ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸ ì—°ê³„

```python
def test_frontend_integration_checklist():
    """
    ì‹¤ì œ ì‚¬ìš©ì í”Œë¡œìš° ê¸°ë°˜ í†µí•© í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸
    
    âœ… API êµ¬í˜„ ì™„ë£Œ í›„ ì¦‰ì‹œ ìˆ˜í–‰:
    1. HTML UIì—ì„œ íŒŒì¼ ì„ íƒ â†’ ì—…ë¡œë“œ ìš”ì²­ â†’ ì„±ê³µ ì‘ë‹µ
    2. ì—…ë¡œë“œëœ íŒŒì¼ â†’ ê²Œì‹œê¸€ì— ì´ë¯¸ì§€ í‘œì‹œ â†’ ì •ìƒ ë Œë”ë§
    3. ì˜¤ë¥˜ ìƒí™© â†’ ì ì ˆí•œ ì‚¬ìš©ì ë©”ì‹œì§€ â†’ UI ìƒíƒœ ë³µêµ¬
    4. íŒŒì¼ ì‚­ì œ â†’ UIì—ì„œ ì´ë¯¸ì§€ ì œê±° â†’ ê¹¨ì§„ ë§í¬ ì—†ìŒ
    
    ğŸ” ë°œê²¬ëœ ì´ìŠˆ ê¸°ë°˜ ìš°ì„ ìˆœìœ„ ì¬ì¡°ì •:
    - ì‚¬ìš©ìê°€ ìì£¼ ê²ªëŠ” ì˜¤ë¥˜ â†’ ê´€ë ¨ í…ŒìŠ¤íŠ¸ ìš°ì„ ìˆœìœ„ ìƒí–¥
    - UI ë Œë”ë§ ë¬¸ì œ â†’ API ì‘ë‹µ í˜•ì‹ í…ŒìŠ¤íŠ¸ ê°•í™”
    - ì„±ëŠ¥ ì´ìŠˆ â†’ íŒŒì¼ í¬ê¸°/ì²˜ë¦¬ ì‹œê°„ í…ŒìŠ¤íŠ¸ ì¶”ê°€
    """
    pass
```

ì´ í…ŒìŠ¤íŠ¸ ê³„íšì„œëŠ” File APIì˜ ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ êµ¬í˜„ì„ ìœ„í•œ ë¡œë“œë§µì„ ì œê³µí•˜ë©°, ì‹¤ì œ ì‚¬ìš©ì í”Œë¡œìš°ì™€ ì—°ê³„ëœ ì‹¤ìš©ì ì¸ í…ŒìŠ¤íŠ¸ ì„¤ê³„ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.