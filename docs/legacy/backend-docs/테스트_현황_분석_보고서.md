# λ°±μ—”λ“ ν…μ¤νΈ ν„ν™© λ¶„μ„ λ³΄κ³ μ„

## π“‹ κ°μ”

μ΄ λ¬Έμ„λ” Xai Community λ°±μ—”λ“ APIμ ν„μ¬ ν…μ¤νΈ μƒνƒλ¥Ό μΆ…ν•©μ μΌλ΅ λ¶„μ„ν• κ²°κ³Όμ…λ‹λ‹¤. μ „μ²΄ 36κ° API μ—”λ“ν¬μΈνΈμ— λ€ν• ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€μ™€ νκ·€ ν…μ¤νΈ μ²΄κ³„ κµ¬μ¶•μ„ μ„ν• ν„ν™©μ„ μ •λ¦¬ν–μµλ‹λ‹¤.

**λ¶„μ„ μΌμ**: 2025-06-27  
**λ¶„μ„ λ€μƒ**: FastAPI λ°±μ—”λ“ (v1.0.0)  
**ν…μ¤νΈ νμΌ μ**: 31κ° (Unit: 24, Integration: 5, Contract: 2)

## π― ν•µμ‹¬ μ”μ•½

### μ „μ²΄ ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€
- **μ „μ²΄ API μ—”λ“ν¬μΈνΈ**: 36κ°
- **μ™„μ „ ν…μ¤νΈ**: 15κ° (42%)
- **λ¶€λ¶„ ν…μ¤νΈ**: 4κ° (11%)
- **λ―Έν…μ¤νΈ**: 17κ° (47%)

### ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό
- **ν†µκ³Όν•λ” ν…μ¤νΈ**: ~70%
- **μ‹¤ν¨ν•λ” ν…μ¤νΈ**: ~25%
- **μ—λ¬ λ°μƒ ν…μ¤νΈ**: ~5%

## π“ λΌμ°ν„°λ³„ μƒμ„Έ λ¶„μ„

### π” μΈμ¦ μ‹μ¤ν… (Auth Router)
```
π“ ν…μ¤νΈ νμΌ: tests/integration/test_auth_router.py
π“ λΌμ°ν„° νμΌ: src/routers/auth.py
```

**μ»¤λ²„λ¦¬μ§€: 25% (3/12)**

| μ—”λ“ν¬μΈνΈ | HTTP λ©”μ„λ“ | ν…μ¤νΈ μƒνƒ | μ°μ„ μμ„ |
|-----------|------------|------------|----------|
| `/register` | POST | β… μ™„λ£ | - |
| `/login` | POST | β… μ™„λ£ | - |
| `/health` | GET | β… μ™„λ£ | - |
| `/refresh` | POST | β λ―Έκµ¬ν„ | π”΄ High |
| `/profile` | GET | β οΈ κΈ°λ³Έλ§ | π΅ Medium |
| `/profile` | PUT | β λ―Έκµ¬ν„ | π΅ Medium |
| `/change-password` | POST | β οΈ κΈ°λ³Έλ§ | π”΄ High |
| `/deactivate` | POST | β οΈ κΈ°λ³Έλ§ | π΅ Medium |
| `/admin/users` | GET | β οΈ κΈ°λ³Έλ§ | π΅ Medium |
| `/admin/users/{id}/suspend` | POST | β λ―Έκµ¬ν„ | π΅ Medium |
| `/admin/users/{id}/activate` | POST | β λ―Έκµ¬ν„ | π΅ Medium |
| `/admin/users/{id}` | DELETE | β λ―Έκµ¬ν„ | π΅ Medium |

**μ£Όμ” μ΄μ:**
- Refresh token κΈ°λ¥ μ™„μ „ λ―Έν…μ¤νΈ
- κ΄€λ¦¬μ κΈ°λ¥ λ€λ¶€λ¶„ λ―Έν…μ¤νΈ
- λΉ„λ°€λ²νΈ λ³€κ²½ λ΅μ§ ν…μ¤νΈ λ¶€μ΅±

### π“ κ²μ‹κΈ€ μ‹μ¤ν… (Posts Router)
```
π“ ν…μ¤νΈ νμΌ: tests/integration/test_posts_router.py
π“ λΌμ°ν„° νμΌ: src/routers/posts.py
```

**μ»¤λ²„λ¦¬μ§€: 55% (6/11)**

| μ—”λ“ν¬μΈνΈ | HTTP λ©”μ„λ“ | ν…μ¤νΈ μƒνƒ | μ°μ„ μμ„ |
|-----------|------------|------------|----------|
| `/api/posts` | GET | β… μ™„λ£ | - |
| `/api/posts` | POST | β… μ™„λ£ | - |
| `/api/posts/search` | GET | β… μ™„λ£ | - |
| `/api/posts/{slug}` | GET | β… μ™„λ£ | - |
| `/api/posts/{slug}` | PUT | β… μ™„λ£ | - |
| `/api/posts/{slug}` | DELETE | β… μ™„λ£ | - |
| `/api/posts/health` | GET | β λ―Έκµ¬ν„ | πΆ Low |
| `/api/posts/{slug}/like` | POST | β λ―Έκµ¬ν„ | π΅ Medium |
| `/api/posts/{slug}/dislike` | POST | β λ―Έκµ¬ν„ | π΅ Medium |
| `/api/posts/{slug}/bookmark` | POST | β λ―Έκµ¬ν„ | π΅ Medium |
| `/api/posts/{slug}/stats` | GET | β λ―Έκµ¬ν„ | π΅ Medium |

**μ£Όμ” μ΄μ:**
- μ‚¬μ©μ λ°μ‘ μ‹μ¤ν… (μΆ‹μ•„μ”/μ‹«μ–΄μ”/λ¶λ§ν¬) λ―Έν…μ¤νΈ
- κ²μ‹κΈ€ ν†µκ³„ API λ―Έν…μ¤νΈ

### π’¬ λ“κΈ€ μ‹μ¤ν… (Comments Router)
```
π“ ν…μ¤νΈ νμΌ: tests/integration/test_comments_router.py
π“ λΌμ°ν„° νμΌ: src/routers/comments.py
```

**μ»¤λ²„λ¦¬μ§€: 71% (5/7)**

| μ—”λ“ν¬μΈνΈ | HTTP λ©”μ„λ“ | ν…μ¤νΈ μƒνƒ | μ°μ„ μμ„ |
|-----------|------------|------------|----------|
| `/api/posts/{slug}/comments` | GET | β… μ™„λ£ | - |
| `/api/posts/{slug}/comments` | POST | β… μ™„λ£ | - |
| `/api/posts/{slug}/comments/{id}/replies` | POST | β… μ™„λ£ | - |
| `/api/posts/{slug}/comments/{id}` | PUT | β… μ™„λ£ | - |
| `/api/posts/{slug}/comments/{id}` | DELETE | β… μ™„λ£ | - |
| `/api/posts/{slug}/comments/{id}/like` | POST | β λ―Έκµ¬ν„ | π΅ Medium |
| `/api/posts/{slug}/comments/{id}/dislike` | POST | β λ―Έκµ¬ν„ | π΅ Medium |

**μ£Όμ” μ΄μ:**
- λ“κΈ€ λ°μ‘ μ‹μ¤ν… λ―Έν…μ¤νΈ

### π“ νμΌ μ—…λ΅λ“ μ‹μ¤ν… (File Upload Router)
```
π“ ν…μ¤νΈ νμΌ: tests/unit/test_file_upload_api.py, tests/contract/test_file_api_contract.py
π“ λΌμ°ν„° νμΌ: src/routers/file_upload.py
```

**μ»¤λ²„λ¦¬μ§€: 25% (1/4)**

| μ—”λ“ν¬μΈνΈ | HTTP λ©”μ„λ“ | ν…μ¤νΈ μƒνƒ | μ°μ„ μμ„ |
|-----------|------------|------------|----------|
| `/upload` | POST | β… μ™„λ£ | - |
| `/{file_id}` | GET | β λ―Έκµ¬ν„ | π”΄ High |
| `/{file_id}/info` | GET | β λ―Έκµ¬ν„ | π΅ Medium |
| `/health` | GET | β λ―Έκµ¬ν„ | πΆ Low |

**μ£Όμ” μ΄μ:**
- νμΌ μ„λΉ™ κΈ°λ¥ μ™„μ „ λ―Έν…μ¤νΈ
- νμΌ μ ‘κ·Ό κ¶ν• ν…μ¤νΈ λ¶€μ΅±

### π¨ μ½ν…μΈ  μ²λ¦¬ μ‹μ¤ν… (Content Router)
```
π“ ν…μ¤νΈ νμΌ: tests/integration/test_editor_api.py (μ¤λ¥ λ°μƒ)
π“ λΌμ°ν„° νμΌ: src/routers/content.py
```

**μ»¤λ²„λ¦¬μ§€: 0% (0/2)**

| μ—”λ“ν¬μΈνΈ | HTTP λ©”μ„λ“ | ν…μ¤νΈ μƒνƒ | μ°μ„ μμ„ |
|-----------|------------|------------|----------|
| `/api/content/preview` | POST | β λ―Έκµ¬ν„ | π”΄ High |
| `/api/content/test` | GET | β λ―Έκµ¬ν„ | πΆ Low |

**μ£Όμ” μ΄μ:**
- μ „μ²΄ λΌμ°ν„° λ―Έν…μ¤νΈ
- λ§ν¬λ‹¤μ΄ μ²λ¦¬ λ° XSS λ°©μ§€ ν…μ¤νΈ λ¶€μ΅±

## π¨ ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό λ¶„μ„

### μ„±κ³µν•λ” ν…μ¤νΈ νμΌ
- `test_password.py`: 26κ° ν…μ¤νΈ λ¨λ‘ ν†µκ³Ό
- `test_jwt.py`: 22κ° ν…μ¤νΈ λ¨λ‘ ν†µκ³Ό
- `test_auth_dependency.py`: 24κ° ν…μ¤νΈ λ¨λ‘ ν†µκ³Ό
- `test_content_service.py`: 16κ° ν…μ¤νΈ λ¨λ‘ ν†µκ³Ό
- `test_file_storage.py`: 3κ° ν…μ¤νΈ λ¨λ‘ ν†µκ³Ό
- `test_file_metadata.py`: 3κ° ν…μ¤νΈ λ¨λ‘ ν†µκ³Ό
- `test_reactions_router.py`: 4κ° ν…μ¤νΈ λ¨λ‘ ν†µκ³Ό
- `test_comments_router.py`: 1κ° ν…μ¤νΈ ν†µκ³Ό

### λ¶€λ¶„ μ‹¤ν¨ν•λ” ν…μ¤νΈ νμΌ
- `test_config_settings.py`: 11/12 ν†µκ³Ό (CORS μ„¤μ • λ¶μΌμΉ)
- `test_database_connection.py`: 17/18 ν†µκ³Ό (Connection pool μ„¤μ • μ°¨μ΄)
- `test_models_extended.py`: 19/20 ν†µκ³Ό (Content type ν•„λ“ μ΄μ)
- `test_indexes_creation.py`: 12/13 ν†µκ³Ό (μ‹¤μ  DB μ—°κ²° μ΄μ)

### μ‹¬κ°ν• μ¤λ¥κ°€ μλ” ν…μ¤νΈ νμΌ
- `test_models_validation.py`: Import μ¤λ¥ (μ΅΄μ¬ν•μ§€ μ•λ” Reaction λ¨λΈ)
- `test_content_upload.py`: PIL μμ΅΄μ„± λ„λ½
- `test_editor_api.py`: Import μ¤λ¥ (src.main λ¨λ“ κ²½λ΅)
- `test_editor_api_contract.py`: λ™μΌν• Import μ¤λ¥

### μ‹¤ν¨ν•λ” ν…μ¤νΈ νμΌ
- `test_user_model.py`: 8/10 μ‹¤ν¨ (λ¨λΈ κ²€μ¦ λ΅μ§ λ¬Έμ )
- `test_file_repository.py`: 2/2 μ‹¤ν¨ (DB μ—°κ²° λ¬Έμ )
- `test_posts_router.py`: 1/1 μ‹¤ν¨ (λΌμ°ν„° ν…μ¤νΈ ν™κ²½ μ„¤μ •)
- `test_auth_router.py`: 3/14 μ‹¤ν¨ (λ΅κ·ΈμΈ κ΄€λ ¨ ν…μ¤νΈ)

## β΅ μ¦‰μ‹ ν•΄κ²° ν•„μ”ν• μ΄μ

### 1. Import μ¤λ¥ (μ¦‰μ‹ μμ • ν•„μ”)
```python
# λ¬Έμ : μ΅΄μ¬ν•μ§€ μ•λ” λ¨λΈ import
from src.models import Reaction, ReactionType  # β μ΅΄μ¬ν•μ§€ μ•μ

# ν•΄κ²°: μ‹¤μ  λ¨λΈ μ‚¬μ©
from src.models import UserReaction, TargetType  # β… μ‹¤μ  λ¨λΈ
```

### 2. μμ΅΄μ„± λ„λ½
```bash
# PIL ν¨ν‚¤μ§€ λ„λ½μΌλ΅ μΈν• ν…μ¤νΈ μ‹¤ν¨
pip install pillow  # λλ” uv add pillow
```

### 3. ν…μ¤νΈ ν™κ²½ μ„¤μ • λ¬Έμ 
- MongoDB ν…μ¤νΈ λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° λ¶μ•μ •
- ν…μ¤νΈ κ°„ λ°μ΄ν„° μ •λ¦¬ λ΅μ§ λ¶€μ΅±
- Mock κ°μ²΄ μ„¤μ • λ¶μ™„μ „

## π― νκ·€ ν…μ¤νΈ μ°μ„ μμ„

### π”΄ High Priority (λ³΄μ• λ° ν•µμ‹¬ κΈ°λ¥)
1. **μΈμ¦ μ‹μ¤ν… μ™„μ„±**
   - Refresh token λ©”μ»¤λ‹μ¦
   - λΉ„λ°€λ²νΈ λ³€κ²½ ν”„λ΅μ„Έμ¤
   - κ΄€λ¦¬μ κ¶ν• κ²€μ¦

2. **μ½ν…μΈ  λ³΄μ•**
   - λ§ν¬λ‹¤μ΄ μ²λ¦¬ λ° XSS λ°©μ§€
   - νμΌ μ—…λ΅λ“ λ³΄μ• κ²€μ¦
   - μ½ν…μΈ  κ²€μ¦ νμ΄ν”„λΌμΈ

3. **νμΌ μ‹μ¤ν…**
   - νμΌ μ ‘κ·Ό κ¶ν• μ μ–΄
   - νμΌ μ„λΉ™ λ³΄μ•

### π΅ Medium Priority (μ‚¬μ©μ κ²½ν—)
1. **μ‚¬μ©μ λ°μ‘ μ‹μ¤ν…**
   - κ²μ‹κΈ€/λ“κΈ€ μΆ‹μ•„μ”/μ‹«μ–΄μ”
   - λ¶λ§ν¬ κΈ°λ¥
   - λ°μ‘ μ¤‘λ³µ λ°©μ§€

2. **ν†µκ³„ λ° λ¶„μ„**
   - κ²μ‹κΈ€ μ΅°νμ/λ°μ‘ ν†µκ³„
   - μ‚¬μ©μ ν™λ™ μ¶”μ 

3. **λ°μ΄ν„° μΌκ΄€μ„±**
   - νΈλμ­μ… ν…μ¤νΈ
   - λ™μ‹μ„± ν…μ¤νΈ

### πΆ Low Priority (μ μ§€λ³΄μ)
1. **Health Check μ—”λ“ν¬μΈνΈ**
2. **μ—λ¬ ν•Έλ“¤λ§ ν‘μ¤€ν™”**
3. **μ„±λ¥ ν…μ¤νΈ**

## π“‹ κ¶μ¥μ‚¬ν•­

### λ‹¨κΈ° λ©ν‘ (1-2μ£Ό)
1. **Import μ¤λ¥ μ¦‰μ‹ μμ •**
2. **ν•µμ‹¬ λ³΄μ• ν…μ¤νΈ μ™„μ„±** (μΈμ¦, κ¶ν•, μ½ν…μΈ  λ³΄μ•)
3. **κΈ°μ΅΄ μ‹¤ν¨ ν…μ¤νΈ μμ •**

### μ¤‘κΈ° λ©ν‘ (1κ°μ›”)
1. **μ‚¬μ©μ λ°μ‘ μ‹μ¤ν… ν…μ¤νΈ μ™„μ„±**
2. **νμΌ μ‹μ¤ν… ν…μ¤νΈ μ™„μ„±**
3. **ν†µν•© ν…μ¤νΈ ν™•λ€**

### μ¥κΈ° λ©ν‘ (2-3κ°μ›”)
1. **μ„±λ¥ λ° λ¶€ν• ν…μ¤νΈ**
2. **E2E ν…μ¤νΈ μλ™ν™”**
3. **ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ 85% μ΄μƒ λ‹¬μ„±**

## π”§ ν…μ¤νΈ ν™κ²½ κ°μ„  λ°©μ•

### 1. μμ΅΄μ„± κ΄€λ¦¬
```bash
# ν•„μ ν…μ¤νΈ μμ΅΄μ„± μ¶”κ°€
uv add --dev pillow pytest-asyncio pytest-mock
```

### 2. ν…μ¤νΈ λ°μ΄ν„°λ² μ΄μ¤ λ¶„λ¦¬
```python
# ν…μ¤νΈ μ „μ© MongoDB μ„¤μ •
MONGODB_URL_TEST = "mongodb://localhost:27017/xai_community_test"
```

### 3. Mock λ°μ΄ν„° ν‘μ¤€ν™”
```python
# μ¬μ‚¬μ© κ°€λ¥ν• ν…μ¤νΈ ν”½μ¤μ² μƒμ„±
@pytest.fixture
def sample_user_data():
    return {...}
```

### 4. CI/CD νμ΄ν”„λΌμΈ κµ¬μ¶•
```yaml
# GitHub Actions μ›ν¬ν”λ΅μ° μ„¤μ •
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run tests
        run: make test
```

---

**μ‘μ„±μ**: Claude Code  
**λ§μ§€λ§‰ μ—…λ°μ΄νΈ**: 2025-06-27  
**λ‹¤μ κ²€ν†  μμ •**: 2025-07-11