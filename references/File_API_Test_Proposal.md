# íŒŒì¼ API í…ŒìŠ¤íŠ¸ ì½”ë“œ ì œì•ˆ ê°œìš”

## ğŸ“‹ ë¬¸ì„œ ê°œìš”

íŒŒì¼ API êµ¬í˜„ì„ ìœ„í•œ ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì œì•ˆì„œì…ë‹ˆë‹¤. TDD ì›ì¹™ì„ ì¤€ìˆ˜í•˜ë©° ì‹¤ì œ ì‚¬ìš©ì í”Œë¡œìš° ì¤‘ì‹¬ì˜ í…ŒìŠ¤íŠ¸ êµ¬ì„±ì„ ì œì‹œí•©ë‹ˆë‹¤.

---

## 1. í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ êµ¬ì¡° ë° ì˜ì¡´ì„± ê´€ê³„

### í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ ê³„ì¸µ êµ¬ì¡°

```
backend/tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ test_file_validator.py       # ğŸ”µ ê¸°ë°˜ (ì˜ì¡´ì„± ì—†ìŒ)
â”‚   â”‚   â”œâ”€â”€ test_validate_file_type() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬
â”‚   â”‚   â”œâ”€â”€ test_validate_file_size() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬
â”‚   â”‚   â”œâ”€â”€ test_validate_malicious_file() ğŸ”´ ê³ ê¸‰ âš¡ë³‘ë ¬
â”‚   â”‚   â””â”€â”€ test_validate_rate_limit() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”œâ”€â”€ test_file_storage.py         # ğŸŸ¡ ì¡°í•© (validator ì˜ì¡´)
â”‚   â”‚   â”œâ”€â”€ test_generate_file_path() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬
â”‚   â”‚   â”œâ”€â”€ test_save_file_to_disk() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â”œâ”€â”€ test_cleanup_temp_files() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â””â”€â”€ test_handle_storage_errors() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â””â”€â”€ test_file_metadata.py        # ğŸ”µ ê¸°ë°˜ (ì˜ì¡´ì„± ì—†ìŒ)
â”‚       â”œâ”€â”€ test_extract_file_info() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬
â”‚       â”œâ”€â”€ test_generate_stored_filename() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬
â”‚       â””â”€â”€ test_create_file_document() ğŸŸ¡ ì¤‘ê¸‰ âš¡ë³‘ë ¬
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ test_file_upload_api.py      # ğŸ”´ í†µí•© (ëª¨ë“  ê¸°ëŠ¥ ì˜ì¡´)
â”‚   â”‚   â”œâ”€â”€ test_successful_upload_flow() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â”œâ”€â”€ test_upload_with_post_attachment() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â”œâ”€â”€ test_multiple_files_upload() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â””â”€â”€ test_upload_error_scenarios() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”œâ”€â”€ test_file_retrieval_api.py   # ğŸŸ¡ ì¡°í•© (storage ì˜ì¡´)
â”‚   â”‚   â”œâ”€â”€ test_get_file_by_id() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â”œâ”€â”€ test_get_file_metadata() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â””â”€â”€ test_get_files_by_post() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â””â”€â”€ test_file_deletion_api.py    # ğŸ”´ í†µí•© (ëª¨ë“  ê¸°ëŠ¥ ì˜ì¡´)
â”‚       â”œâ”€â”€ test_delete_file_success() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â”‚       â”œâ”€â”€ test_delete_unauthorized() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚       â””â”€â”€ test_cleanup_references() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â””â”€â”€ contract/
    â””â”€â”€ test_file_api_contract.py    # ğŸŸ  ê³„ì•½ (API ì˜ì¡´)
        â”œâ”€â”€ test_upload_request_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨
        â”œâ”€â”€ test_upload_response_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨
        â””â”€â”€ test_error_response_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨
```

### ì˜ì¡´ì„± ê·¸ë˜í”„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ ì˜ì¡´ì„± ê·¸ë˜í”„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                      â”‚
â”‚  ğŸ”µ ê¸°ë°˜ ê³„ì¸µ (ë…ë¦½ì )                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚ test_file_      â”‚    â”‚ test_file_      â”‚                          â”‚
â”‚  â”‚ validator.py    â”‚    â”‚ metadata.py     â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚           â”‚                       â”‚                                  â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                   â–¼                                                  â”‚
â”‚  ğŸŸ¡ ì¡°í•© ê³„ì¸µ (ê¸°ë°˜ ê¸°ëŠ¥ í™œìš©)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚ test_file_      â”‚                                                 â”‚
â”‚  â”‚ storage.py      â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚           â”‚                                                          â”‚
â”‚           â–¼                                                          â”‚
â”‚  ğŸ”´ í†µí•© ê³„ì¸µ (ëª¨ë“  ê¸°ëŠ¥ í†µí•©)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚ test_file_      â”‚    â”‚ test_file_      â”‚                          â”‚
â”‚  â”‚ upload_api.py   â”‚    â”‚ deletion_api.py â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚           â”‚                       â”‚                                  â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                   â–¼                                                  â”‚
â”‚  ğŸŸ  ê³„ì•½ ê³„ì¸µ (API ì¸í„°í˜ì´ìŠ¤)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚ test_file_api_  â”‚                                                 â”‚
â”‚  â”‚ contract.py     â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ê¸°ëŠ¥ í”Œë¡œìš°ì™€ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë§¤í•‘

### íŒŒì¼ ì—…ë¡œë“œ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ íŒŒì¼ ì—…ë¡œë“œ í”Œë¡œìš° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                â”‚
â”‚  ğŸŒ ìš”ì²­ â†’ ğŸ” ì¸ì¦ â†’ ğŸ” ê²€ì¦ â†’ ğŸ’¾ ì €ì¥ â†’ ğŸ“ DBê¸°ë¡ â†’ ğŸ”— ì—°ê²° â†’ ğŸ“¤ ì‘ë‹µ  â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê° ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë§¤í•‘:**

- **ğŸŒ ì‚¬ìš©ì ìš”ì²­ ë‹¨ê³„**:
  - `test_multipart_form_parsing()` - multipart/form-data íŒŒì‹±
  - `test_upload_request_contract()` - API ìš”ì²­ í˜•ì‹ ê²€ì¦

- **ğŸ” ì¸ì¦ ë‹¨ê³„**:
  - `test_bearer_token_validation()` - JWT í† í° ê²€ì¦
  - `test_unauthorized_upload_rejection()` - ë¯¸ì¸ì¦ ìš”ì²­ ê±°ë¶€

- **ğŸ” ì…ë ¥ ê²€ì¦ ë‹¨ê³„**:
  - `test_validate_file_type()` - íŒŒì¼ í˜•ì‹ ê²€ì¦ (MIME + í™•ì¥ì)
  - `test_validate_file_size()` - íŒŒì¼ í¬ê¸° ì œí•œ ê²€ì¦
  - `test_validate_malicious_file()` - ì•…ì„± íŒŒì¼ ì°¨ë‹¨
  - `test_validate_rate_limit()` - ì—…ë¡œë“œ ë¹ˆë„ ì œí•œ

- **ğŸ’¾ ì €ì¥ ë‹¨ê³„**:
  - `test_generate_file_path()` - íŒŒì¼ ê²½ë¡œ ìƒì„±
  - `test_save_file_to_disk()` - ì‹¤ì œ íŒŒì¼ ì €ì¥
  - `test_create_directory_structure()` - ë””ë ‰í† ë¦¬ ìƒì„±

- **ğŸ“ DB ê¸°ë¡ ë‹¨ê³„**:
  - `test_create_file_document()` - íŒŒì¼ ë©”íƒ€ë°ì´í„° ìƒì„±
  - `test_insert_file_metadata()` - MongoDB ë¬¸ì„œ ì €ì¥

- **ğŸ”— ì—°ê²° ë‹¨ê³„**:
  - `test_attach_to_post()` - ê²Œì‹œê¸€ì— íŒŒì¼ ì—°ê²°
  - `test_attach_to_comment()` - ëŒ“ê¸€ì— íŒŒì¼ ì—°ê²°

- **ğŸ“¤ ì‘ë‹µ ë‹¨ê³„**:
  - `test_upload_response_contract()` - API ì‘ë‹µ í˜•ì‹ ê²€ì¦
  - `test_success_response_format()` - ì„±ê³µ ì‘ë‹µ êµ¬ì¡°

### íŒŒì¼ ì¡°íšŒ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ íŒŒì¼ ì¡°íšŒ í”Œë¡œìš° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  ğŸŒ ìš”ì²­ â†’ ğŸ” IDê²€ì¦ â†’ ğŸ“ DBì¡°íšŒ â†’ ğŸ“ íŒŒì¼í™•ì¸ â†’ ğŸ“¤ íŒŒì¼ë°˜í™˜     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê° ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜:**

- **ğŸ” ID ê²€ì¦**: `test_validate_file_id()`
- **ğŸ“ DB ì¡°íšŒ**: `test_get_file_metadata()`
- **ğŸ“ íŒŒì¼ í™•ì¸**: `test_check_file_exists()`
- **ğŸ“¤ íŒŒì¼ ë°˜í™˜**: `test_serve_file_response()`

---

## 3. ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ë³„ í…ŒìŠ¤íŠ¸ ë§¤í•‘

### ğŸŒŸ ì£¼ ì‹œë‚˜ë¦¬ì˜¤ (Happy Path)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì£¼ ì‹œë‚˜ë¦¬ì˜¤: ê²Œì‹œê¸€ ì‘ì„± ì‹œ ì´ë¯¸ì§€ ì²¨ë¶€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚  ì‹œë‚˜ë¦¬ì˜¤: ì‚¬ìš©ìê°€ ê²Œì‹œê¸€ ì‘ì„± ì‹œ ì´ë¯¸ì§€ 3ê°œ ì²¨ë¶€                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. ë¡œê·¸ì¸ â†’ 2. ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€ â†’ 3. ì´ë¯¸ì§€ ì„ íƒ (3ê°œ)      â”‚ â”‚
â”‚  â”‚ 4. íŒŒì¼ ì—…ë¡œë“œ â†’ 5. ê²Œì‹œê¸€ ë‚´ìš© ì‘ì„± â†’ 6. ê²Œì‹œê¸€ ì €ì¥         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                                    â”‚
â”‚  â€¢ test_multiple_files_upload() - ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ               â”‚
â”‚  â€¢ test_upload_with_post_attachment() - ê²Œì‹œê¸€ ì—°ê²°             â”‚
â”‚  â€¢ test_successful_upload_flow() - ì „ì²´ ì„±ê³µ í”Œë¡œìš°              â”‚
â”‚  â€¢ test_post_creation_with_files() - ê²Œì‹œê¸€ ìƒì„±ê³¼ íŒŒì¼ ì—°ë™     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âš ï¸ ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤ (Error Cases)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤: íŒŒì¼ í¬ê¸° ì´ˆê³¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                          â”‚
â”‚  ì‹œë‚˜ë¦¬ì˜¤: ì‚¬ìš©ìê°€ 5MB ì´ˆê³¼ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œë„            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. ë¡œê·¸ì¸ â†’ 2. ëŒ€ìš©ëŸ‰ íŒŒì¼ ì„ íƒ (8MB)              â”‚ â”‚
â”‚  â”‚ 3. ì—…ë¡œë“œ ì‹œë„ â†’ 4. ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ               â”‚ â”‚
â”‚  â”‚ 5. ì‚¬ìš©ì ì•ˆë‚´ â†’ 6. ì ì ˆí•œ í¬ê¸° íŒŒì¼ë¡œ ì¬ì‹œë„       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                            â”‚
â”‚  â€¢ test_oversized_file_rejection() - í¬ê¸° ì´ˆê³¼ ê±°ë¶€      â”‚
â”‚  â€¢ test_file_size_error_message() - ì ì ˆí•œ ì˜¤ë¥˜ ë©”ì‹œì§€   â”‚
â”‚  â€¢ test_upload_error_scenarios() - ì—…ë¡œë“œ ì‹¤íŒ¨ ì²˜ë¦¬     â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”§ ì˜ˆì™¸ ì‹œë‚˜ë¦¬ì˜¤ (Edge Cases)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì˜ˆì™¸ ì‹œë‚˜ë¦¬ì˜¤: ë™ì‹œ ì—…ë¡œë“œ ë° ì¤‘ë³µ ì²˜ë¦¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                    â”‚
â”‚  ì‹œë‚˜ë¦¬ì˜¤: ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— ê°™ì€ ì´ë¦„ íŒŒì¼ ì—…ë¡œë“œ                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. ì‚¬ìš©ìAì™€ ì‚¬ìš©ìBê°€ ë™ì‹œì— "image.jpg" ì—…ë¡œë“œ             â”‚ â”‚
â”‚  â”‚ 2. ê³ ìœ  íŒŒì¼ëª… ìƒì„±ìœ¼ë¡œ ì¶©ëŒ ë°©ì§€                            â”‚ â”‚
â”‚  â”‚ 3. ê°ê° ë‹¤ë¥¸ ê²½ë¡œì— ì €ì¥ (UUID ê¸°ë°˜)                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                    â”‚
â”‚  ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                                      â”‚
â”‚  â€¢ test_concurrent_upload_handling() - ë™ì‹œ ì—…ë¡œë“œ ì²˜ë¦¬           â”‚
â”‚  â€¢ test_unique_filename_generation() - ê³ ìœ  íŒŒì¼ëª… ìƒì„±           â”‚
â”‚  â€¢ test_duplicate_filename_resolution() - ì¤‘ë³µ íŒŒì¼ëª… í•´ê²°        â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. êµ¬í˜„ ìˆœì„œ ì œì•ˆ

### 1ï¸âƒ£ 1ë‹¨ê³„: MVP í•„ìˆ˜ í…ŒìŠ¤íŠ¸ (ğŸŸ¦ í•„ìˆ˜)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 1ë‹¨ê³„: MVP ì‹œìŠ¤í…œ ì•ˆì •ì„± í•µì‹¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  ğŸ“‹ ì •ìƒ ì‹œë‚˜ë¦¬ì˜¤ (Happy Path) - 3ì¼ ì˜ˆìƒ                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â‘  test_validate_file_type() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬          â”‚ â”‚
â”‚  â”‚    - MIME íƒ€ì…ê³¼ í™•ì¥ì ê²€ì¦                        â”‚ â”‚
â”‚  â”‚    - í—ˆìš©ëœ ì´ë¯¸ì§€ í˜•ì‹ë§Œ í†µê³¼                      â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ â‘¡ test_validate_file_size() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬          â”‚ â”‚
â”‚  â”‚    - 5MB ì´í•˜ íŒŒì¼ë§Œ í—ˆìš©                          â”‚ â”‚
â”‚  â”‚    - ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸ (5MB ì •í™•íˆ)                    â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ â‘¢ test_generate_file_path() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬          â”‚ â”‚
â”‚  â”‚    - ë…„/ì›”/íƒ€ì…ë³„ ë””ë ‰í† ë¦¬ êµ¬ì¡°                     â”‚ â”‚
â”‚  â”‚    - UUID ê¸°ë°˜ ê³ ìœ  íŒŒì¼ëª…                         â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ â‘£ test_save_file_to_disk() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨          â”‚ â”‚
â”‚  â”‚    - ì‹¤ì œ íŒŒì¼ ì €ì¥ ê²€ì¦                           â”‚ â”‚
â”‚  â”‚    - ë””ë ‰í† ë¦¬ ìë™ ìƒì„±                            â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ â‘¤ test_create_file_document() ğŸŸ¡ ì¤‘ê¸‰ âš¡ë³‘ë ¬        â”‚ â”‚
â”‚  â”‚    - MongoDB ë¬¸ì„œ êµ¬ì¡° ê²€ì¦                        â”‚ â”‚
â”‚  â”‚    - ë©”íƒ€ë°ì´í„° í•„ë“œ ì™„ì„±ë„                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ ì˜¤ë¥˜ ì²˜ë¦¬ (Error Handling) - 2ì¼ ì˜ˆìƒ                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â‘  test_oversized_file_rejection() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬     â”‚ â”‚
â”‚  â”‚    - 5MB ì´ˆê³¼ íŒŒì¼ ê±°ë¶€                            â”‚ â”‚
â”‚  â”‚    - ì ì ˆí•œ ì˜¤ë¥˜ ë©”ì‹œì§€ ë°˜í™˜                       â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ â‘¡ test_unsupported_format_rejection() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬ â”‚ â”‚
â”‚  â”‚    - .exe, .pdf ë“± ì°¨ë‹¨                           â”‚ â”‚
â”‚  â”‚    - í—ˆìš© í˜•ì‹ ëª©ë¡ ì œê³µ                          â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ â‘¢ test_malicious_file_detection() ğŸ”´ ê³ ê¸‰ âš¡ë³‘ë ¬     â”‚ â”‚
â”‚  â”‚    - íŒŒì¼ í—¤ë” ê²€ì¦                               â”‚ â”‚
â”‚  â”‚    - ì‹¤í–‰ íŒŒì¼ ìœ„ì¥ ì°¨ë‹¨                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  ğŸ”Œ API ê³„ì•½ (Contract) - 1ì¼ ì˜ˆìƒ                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â‘  test_upload_request_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨     â”‚ â”‚
â”‚  â”‚    - multipart/form-data í˜•ì‹                      â”‚ â”‚
â”‚  â”‚    - í•„ìˆ˜ í•„ë“œ ê²€ì¦                               â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ â‘¡ test_upload_response_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨    â”‚ â”‚
â”‚  â”‚    - JSON ì‘ë‹µ êµ¬ì¡°                               â”‚ â”‚
â”‚  â”‚    - í•„ìˆ˜ ë°˜í™˜ í•„ë“œ (file_id, file_url)          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ 2ë‹¨ê³„: ì‚¬ìš©ì ê²½í—˜ ì•ˆì •í™” (ğŸŸ¡ ê¶Œì¥)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 2ë‹¨ê³„: ì‚¬ìš©ì ê²½í—˜ ê°œì„  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚  ğŸ“‹ ì •ìƒ ì‹œë‚˜ë¦¬ì˜¤ - 4ì¼ ì˜ˆìƒ                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â‘  test_multiple_files_upload() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨       â”‚ â”‚
â”‚  â”‚    - ê²Œì‹œê¸€ 5ê°œ, ëŒ“ê¸€ 1ê°œ ì œí•œ                    â”‚ â”‚
â”‚  â”‚    - íŠ¸ëœì­ì…˜ ì²˜ë¦¬                               â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ â‘¡ test_upload_with_post_attachment() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚    - ê²Œì‹œê¸€ê³¼ íŒŒì¼ ì—°ë™                          â”‚ â”‚
â”‚  â”‚    - ë©”íƒ€ë°ì´í„° ì—°ê²°                             â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ â‘¢ test_get_file_by_id() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨           â”‚ â”‚
â”‚  â”‚    - íŒŒì¼ IDë¡œ ì´ë¯¸ì§€ ë°˜í™˜                       â”‚ â”‚
â”‚  â”‚    - ìºì‹œ í—¤ë” ì„¤ì •                             â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ â‘£ test_get_files_by_post() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨        â”‚ â”‚
â”‚  â”‚    - ê²Œì‹œê¸€ ì²¨ë¶€ íŒŒì¼ ëª©ë¡                       â”‚ â”‚
â”‚  â”‚    - ë©”íƒ€ë°ì´í„° í¬í•¨ ì‘ë‹µ                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  âš ï¸ ì˜¤ë¥˜ ì²˜ë¦¬ - 3ì¼ ì˜ˆìƒ                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â‘  test_file_count_limit_exceeded() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨  â”‚ â”‚
â”‚  â”‚    - ì²¨ë¶€ ê°œìˆ˜ ì œí•œ ì´ˆê³¼                         â”‚ â”‚
â”‚  â”‚    - íƒ€ì…ë³„ ì œí•œ ì ìš©                           â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ â‘¡ test_unauthorized_file_access() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨   â”‚ â”‚
â”‚  â”‚    - ì¸ì¦ ì—†ëŠ” ì—…ë¡œë“œ ì°¨ë‹¨                       â”‚ â”‚
â”‚  â”‚    - ì ì ˆí•œ 401 ì‘ë‹µ                            â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ â‘¢ test_rate_limit_exceeded() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨       â”‚ â”‚
â”‚  â”‚    - ë¶„ë‹¹ ì—…ë¡œë“œ ì œí•œ                           â”‚ â”‚
â”‚  â”‚    - 429 ì‘ë‹µê³¼ ì¬ì‹œë„ ì•ˆë‚´                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ 3ë‹¨ê³„: ê³ ê¸‰ ê¸°ëŠ¥ ìµœì í™” (ğŸŸ¢ ì„ íƒ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 3ë‹¨ê³„: ê³ ê¸‰ ê¸°ëŠ¥ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                       â”‚
â”‚  ğŸ“‹ ì •ìƒ ì‹œë‚˜ë¦¬ì˜¤ - 5ì¼ ì˜ˆìƒ                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â‘  test_delete_file_success() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨       â”‚ â”‚
â”‚  â”‚    - íŒŒì¼ ì‚­ì œ ë° ì°¸ì¡° ì •ë¦¬                     â”‚ â”‚
â”‚  â”‚    - posts/commentsì—ì„œ file_id ì œê±°           â”‚ â”‚
â”‚  â”‚                                                 â”‚ â”‚
â”‚  â”‚ â‘¡ test_cleanup_references() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨       â”‚ â”‚
â”‚  â”‚    - ì—°ê´€ ë°ì´í„° ì¼ê´€ì„± ìœ ì§€                    â”‚ â”‚
â”‚  â”‚    - íŠ¸ëœì­ì…˜ ë¡¤ë°± ì²˜ë¦¬                        â”‚ â”‚
â”‚  â”‚                                                 â”‚ â”‚
â”‚  â”‚ â‘¢ test_concurrent_upload_handling() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚    - ë™ì‹œ ì—…ë¡œë“œ ì‹œ ì¶©ëŒ ë°©ì§€                   â”‚ â”‚
â”‚  â”‚    - ë½ ë©”ì»¤ë‹ˆì¦˜ ê²€ì¦                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  âš ï¸ ì˜¤ë¥˜ ì²˜ë¦¬ - 3ì¼ ì˜ˆìƒ                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â‘  test_delete_unauthorized() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨      â”‚ â”‚
â”‚  â”‚    - ì—…ë¡œë”ê°€ ì•„ë‹Œ ì‚¬ìš©ì ì‚­ì œ ì‹œë„             â”‚ â”‚
â”‚  â”‚    - 403 Forbidden ì‘ë‹µ                        â”‚ â”‚
â”‚  â”‚                                                 â”‚ â”‚
â”‚  â”‚ â‘¡ test_storage_error_handling() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨   â”‚ â”‚
â”‚  â”‚    - ë””ìŠ¤í¬ ê³µê°„ ë¶€ì¡± ìƒí™©                      â”‚ â”‚
â”‚  â”‚    - íŒŒì¼ ì‹œìŠ¤í…œ ì˜¤ë¥˜ ë³µêµ¬                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. í”„ë¡ íŠ¸ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸ ì—°ê³„

### API êµ¬í˜„ í›„ ì¦‰ì‹œ ê²€ì¦ í•­ëª©

```python
def test_frontend_integration_upload():
    """
    ì‹¤ì œ í”„ë¡ íŠ¸ì—”ë“œ ì‚¬ìš©ì í”Œë¡œìš° ê¸°ë°˜ í†µí•© í…ŒìŠ¤íŠ¸
    
    ê²€ì¦ í•­ëª©:
    1. HTML íŒŒì¼ ì„ íƒ â†’ FormData ìƒì„± â†’ API í˜¸ì¶œ
    2. ì„±ê³µ ì‹œ file_id ë°˜í™˜ â†’ ê²Œì‹œê¸€ ì‘ì„±ì— í¬í•¨
    3. ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ì ì¹œí™”ì  ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
    4. ì§„í–‰ë¥  í‘œì‹œ ë° ì·¨ì†Œ ê¸°ëŠ¥ ë™ì‘
    
    ğŸš¨ ì¤‘ìš”: API ì‘ë‹µ êµ¬ì¡°ê°€ frontend-prototypes/UI.htmlì˜
           JavaScript ì½”ë“œì™€ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
    """
    pass

def test_image_display_integration():
    """
    ì—…ë¡œë“œëœ ì´ë¯¸ì§€ í‘œì‹œ ê¸°ëŠ¥ ê²€ì¦
    
    ì‹œë‚˜ë¦¬ì˜¤:
    1. íŒŒì¼ ì—…ë¡œë“œ â†’ file_id íšë“
    2. ê²Œì‹œê¸€ì— <img src="/api/files/{file_id}"> ì‚½ì…
    3. ë¸Œë¼ìš°ì €ì—ì„œ ì´ë¯¸ì§€ ì •ìƒ ë¡œë”© í™•ì¸
    4. ìºì‹œ í—¤ë”ë¡œ ì„±ëŠ¥ ìµœì í™” ë™ì‘
    """
    pass
```

### í†µí•© í…ŒìŠ¤íŠ¸ í›„ ìš°ì„ ìˆœìœ„ ì¬ì¡°ì •

í”„ë¡ íŠ¸ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸ì—ì„œ ë°œê²¬ëœ ì´ìŠˆë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒ í…ŒìŠ¤íŠ¸ë“¤ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ìƒí–¥ ì¡°ì •:

- **ì˜¤ë¥˜ ë©”ì‹œì§€ ê°œì„ **: ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì´í•´í•  ìˆ˜ ìˆëŠ” ë©”ì‹œì§€
- **API ì‘ë‹µ êµ¬ì¡° ìˆ˜ì •**: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í•„ìš”í•œ ì¶”ê°€ í•„ë“œ
- **ì„±ëŠ¥ ìµœì í™”**: ì‹¤ì œ ì‚¬ìš©ëŸ‰ì—ì„œ ë°œê²¬ëœ ë³‘ëª©ì 

---

## 6. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ëµ

### ë³‘ë ¬ vs ìˆœì°¨ ì‹¤í–‰

```python
# âš¡ ë³‘ë ¬ ì‹¤í–‰ ê°€ëŠ¥ (ë…ë¦½ì )
PARALLEL_TESTS = [
    "test_validate_file_type",
    "test_validate_file_size", 
    "test_generate_file_path",
    "test_create_file_document",
    "test_oversized_file_rejection",
    "test_unsupported_format_rejection"
]

# ğŸ”„ ìˆœì°¨ ì‹¤í–‰ í•„ìš” (ê³µìœ  ë¦¬ì†ŒìŠ¤)
SEQUENTIAL_TESTS = [
    "test_save_file_to_disk",           # íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼
    "test_multiple_files_upload",       # DB íŠ¸ëœì­ì…˜
    "test_delete_file_success",         # íŒŒì¼ ì •ë¦¬
    "test_rate_limit_exceeded",         # ì‹œê°„ ê¸°ë°˜ ì œí•œ
    "test_concurrent_upload_handling"   # ë™ì‹œì„± í…ŒìŠ¤íŠ¸
]
```

### Mock ì‚¬ìš© ì •ì±…

```python
# ğŸš¨ Mock ì‚¬ìš© í—ˆìš© ì‚¬ë¡€
def test_email_notification_on_upload():
    """
    íŒŒì¼ ì—…ë¡œë“œ ì‹œ ì´ë©”ì¼ ì•Œë¦¼ ê¸°ëŠ¥
    
    ğŸš¨ Mock ì‚¬ìš©: EmailService
    ì´ìœ : SMTP ì„œë²„ ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•œ í…ŒìŠ¤íŠ¸ ë¶ˆì•ˆì •ì„±
    ëŒ€ì•ˆ: ì‹¤ì œ ì´ë©”ì¼ ë°œì†¡ì€ E2E í…ŒìŠ¤íŠ¸ì—ì„œ ê²€ì¦
    """
    with patch('src.services.email_service.EmailService') as mock_email:
        # íŒŒì¼ ì—…ë¡œë“œ ë¡œì§ í…ŒìŠ¤íŠ¸
        # ì´ë©”ì¼ ì„œë¹„ìŠ¤ í˜¸ì¶œ ì—¬ë¶€ë§Œ ê²€ì¦
        pass

# âŒ Mock ì‚¬ìš© ê¸ˆì§€ ì‚¬ë¡€  
def test_file_storage():
    """
    íŒŒì¼ ì €ì¥ ê¸°ëŠ¥ì€ Mock ì—†ì´ ì‹¤ì œ íŒŒì¼ ì‹œìŠ¤í…œ ì‚¬ìš©
    - ì„ì‹œ ë””ë ‰í† ë¦¬ì— ì‹¤ì œ íŒŒì¼ ì €ì¥
    - í…ŒìŠ¤íŠ¸ í›„ ì •ë¦¬ (tearDown)
    """
    pass
```

---

## 7. API ê³„ì•½ í…ŒìŠ¤íŠ¸ (MVP ìˆ˜ì¤€)

### ìµœì†Œ ê²€ì¦ í—¬í¼

```python
def assert_file_api_basic_contract(response, endpoint_type="upload"):
    """
    íŒŒì¼ API MVP ê³„ì•½ ìµœì†Œ ê²€ì¦
    
    ê³µí†µ ê²€ì¦:
    - HTTP ìƒíƒœ ì½”ë“œ ì ì ˆì„±
    - Content-Type: application/json
    - ì‘ë‹µ ì‹œê°„ < 5ì´ˆ (íŒŒì¼ ì—…ë¡œë“œ ê¸°ì¤€)
    
    ì—…ë¡œë“œ API í•„ìˆ˜ í•„ë“œ:
    - file_id (string): í”„ë¡ íŠ¸ì—”ë“œì—ì„œ íŒŒì¼ ì°¸ì¡°ìš©
    - file_url (string): ì´ë¯¸ì§€ í‘œì‹œìš© URL
    - file_size (number): ì‚¬ìš©ì ì •ë³´ í‘œì‹œìš©
    """
    pass
    
def record_file_api_contract(endpoint, request, response):
    """
    í–¥í›„ ë³¸ê²© ê³„ì•½ í…ŒìŠ¤íŠ¸ìš© API ìŠ¤í‚¤ë§ˆ ê¸°ë¡
    
    ê¸°ë¡ í•­ëª©:
    - ìš”ì²­ ìŠ¤í‚¤ë§ˆ: multipart/form-data êµ¬ì¡°
    - ì‘ë‹µ ìŠ¤í‚¤ë§ˆ: ì„±ê³µ/ì‹¤íŒ¨ë³„ JSON êµ¬ì¡°  
    - í—¤ë” ìš”êµ¬ì‚¬í•­: Authorization, Content-Type
    - ì˜¤ë¥˜ ì½”ë“œ ë§¤í•‘: ìƒí™©ë³„ HTTP ìƒíƒœ ì½”ë“œ
    """
    pass
```

---

## 8. êµ¬í˜„ ì™„ë£Œ ê¸°ì¤€

### ê° ë‹¨ê³„ë³„ ì™„ë£Œ ì¡°ê±´

**1ë‹¨ê³„ (MVP) ì™„ë£Œ ê¸°ì¤€:**
- âœ… ëª¨ë“  ğŸŸ¦ í•„ìˆ˜ í…ŒìŠ¤íŠ¸ í†µê³¼
- âœ… ê¸°ë³¸ íŒŒì¼ ì—…ë¡œë“œ/ì¡°íšŒ ê¸°ëŠ¥ ë™ì‘
- âœ… í”„ë¡ íŠ¸ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸ 1íšŒ ì„±ê³µ
- âœ… ë³´ì•ˆ ê²€ì¦ í…ŒìŠ¤íŠ¸ í†µê³¼

**2ë‹¨ê³„ (ì•ˆì •í™”) ì™„ë£Œ ê¸°ì¤€:**
- âœ… ëª¨ë“  ğŸŸ¡ ê¶Œì¥ í…ŒìŠ¤íŠ¸ í†µê³¼  
- âœ… ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ ì•ˆì •ì„± í™•ì¸
- âœ… ì˜¤ë¥˜ ì²˜ë¦¬ ì‚¬ìš©ì ê²½í—˜ ê²€ì¦
- âœ… ì„±ëŠ¥ ê¸°ì¤€ì„  ì„¤ì • (ì—…ë¡œë“œ 5ì´ˆ ì´ë‚´)

**3ë‹¨ê³„ (ìµœì í™”) ì™„ë£Œ ê¸°ì¤€:**
- âœ… ëª¨ë“  ğŸŸ¢ ì„ íƒ í…ŒìŠ¤íŠ¸ í†µê³¼
- âœ… íŒŒì¼ ì‚­ì œ ë° ì •ë¦¬ ê¸°ëŠ¥ ì™„ì„±
- âœ… ë™ì‹œì„± ì²˜ë¦¬ ì•ˆì •ì„± í™•ì¸  
- âœ… í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ

---

ì´ ì œì•ˆì„œë¥¼ ë°”íƒ•ìœ¼ë¡œ ì²´ê³„ì ì¸ TDD ê°œë°œì„ ì§„í–‰í•˜ì—¬ ì•ˆì •ì ì´ê³  ì‚¬ìš©ì ì¹œí™”ì ì¸ íŒŒì¼ APIë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.