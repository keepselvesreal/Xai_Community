# íŒŒì¼ API í…ŒìŠ¤íŠ¸ ì½”ë“œ ì œì•ˆ ê°œìš”

## ğŸ“‹ ë¬¸ì„œ ëª©ì°¨

1. [ëª©ì ](#ëª©ì )
2. [íŒŒì¼ API ê¸°ëŠ¥ ë¶„ì„](#íŒŒì¼-api-ê¸°ëŠ¥-ë¶„ì„)
3. [í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ êµ¬ì¡° ì„¤ê³„](#í…ŒìŠ¤íŠ¸-ëª¨ë“ˆ-êµ¬ì¡°-ì„¤ê³„)
4. [ê¸°ëŠ¥ í”Œë¡œìš°ì™€ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë§¤í•‘](#ê¸°ëŠ¥-í”Œë¡œìš°ì™€-í…ŒìŠ¤íŠ¸-í•¨ìˆ˜-ë§¤í•‘)
5. [ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ë³„ í…ŒìŠ¤íŠ¸ ë§¤í•‘](#ì‚¬ìš©ì-ì‹œë‚˜ë¦¬ì˜¤ë³„-í…ŒìŠ¤íŠ¸-ë§¤í•‘)
6. [êµ¬í˜„ ìˆœì„œ ì œì•ˆ](#êµ¬í˜„-ìˆœì„œ-ì œì•ˆ)
7. [API ê³„ì•½ í…ŒìŠ¤íŠ¸ ì„¤ê³„](#api-ê³„ì•½-í…ŒìŠ¤íŠ¸-ì„¤ê³„)
8. [í…ŒìŠ¤íŠ¸ í™˜ê²½ ë° ì„¤ì •](#í…ŒìŠ¤íŠ¸-í™˜ê²½-ë°-ì„¤ì •)

---

## 1. ëª©ì 

íŒŒì¼ ì—…ë¡œë“œ, ì¡°íšŒ, ì‚­ì œ ë“± íŒŒì¼ ê´€ë¦¬ APIì˜ ì•ˆì •ì ì´ê³  íš¨ìœ¨ì ì¸ êµ¬í˜„ì„ ìœ„í•œ ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì œì•ˆí•©ë‹ˆë‹¤. Classic TDD ì›ì¹™ì„ ì¤€ìˆ˜í•˜ë©°, ì‚¬ìš©ì í”Œë¡œìš° ì¤‘ì‹¬ì˜ ì‹¤ìš©ì ì¸ í…ŒìŠ¤íŠ¸ ì „ëµì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤.

---

## 2. íŒŒì¼ API ê¸°ëŠ¥ ë¶„ì„

### 2.1 í•µì‹¬ API ì—”ë“œí¬ì¸íŠ¸

```
POST /api/files/upload        # íŒŒì¼ ì—…ë¡œë“œ
GET  /api/files/{file_id}     # íŒŒì¼ ë‹¤ìš´ë¡œë“œ/ì¡°íšŒ
GET  /api/files/{file_id}/info # íŒŒì¼ ë©”íƒ€ë°ì´í„° ì¡°íšŒ
DELETE /api/files/{file_id}   # íŒŒì¼ ì‚­ì œ
GET  /api/posts/{slug}/files  # ê²Œì‹œê¸€ ì²¨ë¶€íŒŒì¼ ëª©ë¡
```

### 2.2 ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™

**íŒŒì¼ ì œí•œì‚¬í•­:**
- **ì§€ì› í˜•ì‹**: jpg, jpeg, png, gif, webp
- **ìµœëŒ€ í¬ê¸°**: 5MB
- **ê°œìˆ˜ ì œí•œ**: post(5ê°œ), comment(1ê°œ), profile(1ê°œ)

**ë³´ì•ˆ ìš”êµ¬ì‚¬í•­:**
- íŒŒì¼ íƒ€ì… ì´ì¤‘ ê²€ì¦ (MIME + í™•ì¥ì)
- ì•…ì„± íŒŒì¼ ì°¨ë‹¨ (í—¤ë” ê²€ì¦)
- Rate Limiting (1ë¶„ë‹¹ 10ê°œ, 1ì‹œê°„ë‹¹ 50ê°œ, 1ì¼ë‹¹ 200ê°œ)

---

## 3. í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ êµ¬ì¡° ì„¤ê³„

### 3.1 í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ ì˜ì¡´ì„± ê³„ì¸µ

```
tests/
â”œâ”€â”€ unit/                           # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_file_validator.py      # ğŸ”µ ê¸°ë°˜ (ë…ë¦½ì )
â”‚   â”‚   â”œâ”€â”€ test_file_size_validation() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬
â”‚   â”‚   â”œâ”€â”€ test_file_type_validation() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬
â”‚   â”‚   â”œâ”€â”€ test_mime_type_security_check() ğŸ”´ ê³ ê¸‰ âš¡ë³‘ë ¬
â”‚   â”‚   â””â”€â”€ test_malicious_file_detection() ğŸ”´ ê³ ê¸‰ âš¡ë³‘ë ¬
â”‚   â”œâ”€â”€ test_file_storage.py        # ğŸŸ¡ ì¡°í•© (validator ì˜ì¡´)
â”‚   â”‚   â”œâ”€â”€ test_generate_file_path() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬
â”‚   â”‚   â”œâ”€â”€ test_save_file_to_disk() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â”œâ”€â”€ test_create_directory_structure() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â””â”€â”€ test_file_cleanup_on_error() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â””â”€â”€ test_file_metadata.py       # ğŸ”µ ê¸°ë°˜ (ë…ë¦½ì )
â”‚       â”œâ”€â”€ test_extract_file_metadata() ğŸŸ¡ ì¤‘ê¸‰ âš¡ë³‘ë ¬
â”‚       â”œâ”€â”€ test_generate_file_url() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬
â”‚       â””â”€â”€ test_metadata_validation() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬
â”œâ”€â”€ integration/                    # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_file_upload_api.py     # ğŸ”´ í†µí•© (ëª¨ë“  ê¸°ëŠ¥ ì˜ì¡´)
â”‚   â”‚   â”œâ”€â”€ test_successful_file_upload() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â”œâ”€â”€ test_multiple_files_upload() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â”œâ”€â”€ test_file_upload_with_post_creation() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â””â”€â”€ test_concurrent_upload_handling() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”œâ”€â”€ test_file_retrieval_api.py  # ğŸ”´ í†µí•© (storage + metadata ì˜ì¡´)
â”‚   â”‚   â”œâ”€â”€ test_file_download_by_id() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â”œâ”€â”€ test_file_info_retrieval() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â”‚   â””â”€â”€ test_cached_file_response() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â”‚   â””â”€â”€ test_file_management_api.py # ğŸ”´ í†µí•© (ì „ì²´ ì˜ì¡´)
â”‚       â”œâ”€â”€ test_file_deletion_workflow() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â”‚       â”œâ”€â”€ test_reference_cleanup() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â”‚       â””â”€â”€ test_orphaned_file_handling() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨
â””â”€â”€ contract/                       # API ê³„ì•½ í…ŒìŠ¤íŠ¸
    â””â”€â”€ test_file_api_contract.py   # ğŸŸ  ê³„ì•½ (API ì˜ì¡´)
        â”œâ”€â”€ test_upload_request_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨
        â”œâ”€â”€ test_upload_response_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨
        â”œâ”€â”€ test_error_response_contract() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
        â””â”€â”€ test_file_url_format_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨
```

### 3.2 ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ê·¸ë˜í”„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ ì˜ì¡´ì„± ê·¸ë˜í”„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                      â”‚
â”‚  ğŸ”µ ê¸°ë°˜ ê³„ì¸µ (ë…ë¦½ì )                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚ test_file_      â”‚    â”‚ test_file_      â”‚                          â”‚
â”‚  â”‚ validator.py    â”‚    â”‚ metadata.py     â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚           â”‚                       â”‚                                  â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                   â–¼                                                  â”‚
â”‚  ğŸŸ¡ ì¡°í•© ê³„ì¸µ (ê¸°ë°˜ ê¸°ëŠ¥ í™œìš©)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚ test_file_      â”‚                                                 â”‚
â”‚  â”‚ storage.py      â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚           â”‚                                                          â”‚
â”‚           â–¼                                                          â”‚
â”‚  ğŸ”´ í†µí•© ê³„ì¸µ (ì „ì²´ ê¸°ëŠ¥ í†µí•©)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ test_file_      â”‚  â”‚ test_file_      â”‚  â”‚ test_file_      â”‚      â”‚
â”‚  â”‚ upload_api.py   â”‚  â”‚ retrieval_api.pyâ”‚  â”‚ management_api. â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ py              â”‚      â”‚
â”‚           â”‚                    â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚               â”‚
â”‚                    â–¼                                â–¼               â”‚
â”‚  ğŸŸ  ê³„ì•½ ê³„ì¸µ (API ì¸í„°í˜ì´ìŠ¤)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚ test_file_api_  â”‚                                                 â”‚
â”‚  â”‚ contract.py     â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ê¸°ëŠ¥ í”Œë¡œìš°ì™€ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë§¤í•‘

### 4.1 íŒŒì¼ ì—…ë¡œë“œ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ íŒŒì¼ ì—…ë¡œë“œ í”Œë¡œìš° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚ ğŸŒ ìš”ì²­ ìˆ˜ì‹  â”€â”€â†’ ğŸ” íŒŒì¼ ê²€ì¦ â”€â”€â†’ ğŸ’¾ íŒŒì¼ ì €ì¥ â”€â”€â†’ ğŸ“ ë©”íƒ€ë°ì´í„° ì €ì¥ â”€â”€â†’ ğŸ“¤ ì‘ë‹µ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê° ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë§¤í•‘:**

- **ğŸŒ ìš”ì²­ ìˆ˜ì‹  ë‹¨ê³„**:
  - `test_upload_request_contract()` - multipart/form-data í˜•ì‹ ê²€ì¦
  - `test_authentication_required()` - Bearer Token ì¸ì¦ í™•ì¸

- **ğŸ” íŒŒì¼ ê²€ì¦ ë‹¨ê³„**:
  - `test_file_size_validation()` - 5MB í¬ê¸° ì œí•œ ê²€ì¦
  - `test_file_type_validation()` - í—ˆìš©ëœ í™•ì¥ì ê²€ì¦
  - `test_mime_type_security_check()` - MIME íƒ€ì… ì´ì¤‘ ê²€ì¦
  - `test_malicious_file_detection()` - ì•…ì„± íŒŒì¼ ì°¨ë‹¨

- **ğŸ’¾ íŒŒì¼ ì €ì¥ ë‹¨ê³„**:
  - `test_generate_file_path()` - ê³ ìœ  íŒŒì¼ëª… ë° ê²½ë¡œ ìƒì„±
  - `test_save_file_to_disk()` - ë¬¼ë¦¬ì  íŒŒì¼ ì €ì¥
  - `test_create_directory_structure()` - ë…„/ì›”/íƒ€ì…ë³„ ë””ë ‰í† ë¦¬ ìƒì„±

- **ğŸ“ ë©”íƒ€ë°ì´í„° ì €ì¥ ë‹¨ê³„**:
  - `test_extract_file_metadata()` - íŒŒì¼ ì •ë³´ ì¶”ì¶œ
  - `test_metadata_database_save()` - MongoDB ë¬¸ì„œ ì €ì¥
  - `test_generate_file_url()` - ì ‘ê·¼ URL ìƒì„±

- **ğŸ“¤ ì‘ë‹µ ë‹¨ê³„**:
  - `test_upload_response_contract()` - ì‘ë‹µ í˜•ì‹ ê²€ì¦
  - `test_error_response_format()` - ì˜¤ë¥˜ ì‘ë‹µ êµ¬ì¡° í™•ì¸

### 4.2 íŒŒì¼ ì¡°íšŒ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ íŒŒì¼ ì¡°íšŒ í”Œë¡œìš° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                      â”‚
â”‚ ğŸŒ ìš”ì²­ ìˆ˜ì‹  â”€â”€â†’ ğŸ” íŒŒì¼ ID ê²€ì¦ â”€â”€â†’ ğŸ“– ë©”íƒ€ë°ì´í„° ì¡°íšŒ â”€â”€â†’ ğŸ“¤ íŒŒì¼ ë°˜í™˜ â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê° ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë§¤í•‘:**

- **ğŸŒ ìš”ì²­ ìˆ˜ì‹ **: `test_file_id_parameter_validation()`
- **ğŸ” íŒŒì¼ ID ê²€ì¦**: `test_valid_object_id_format()`
- **ğŸ“– ë©”íƒ€ë°ì´í„° ì¡°íšŒ**: `test_file_metadata_retrieval()`  
- **ğŸ“¤ íŒŒì¼ ë°˜í™˜**: `test_file_download_by_id()`

---

## 5. ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ë³„ í…ŒìŠ¤íŠ¸ ë§¤í•‘

### 5.1 ì£¼ ì‹œë‚˜ë¦¬ì˜¤ (Happy Path)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ â†’ í…ŒìŠ¤íŠ¸ ë§¤í•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                            â”‚
â”‚  ğŸŒŸ ì‹œë‚˜ë¦¬ì˜¤ 1: "ê²Œì‹œê¸€ ì‘ì„± ì‹œ ì´ë¯¸ì§€ ì²¨ë¶€"                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì‚¬ìš©ì í–‰ë™: ë¡œê·¸ì¸ â†’ ì´ë¯¸ì§€ ì„ íƒ â†’ ê²Œì‹œê¸€ ì‘ì„± â†’ ì—…ë¡œë“œ    â”‚ â”‚
â”‚  â”‚ ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                           â”‚ â”‚
â”‚  â”‚ â€¢ test_successful_file_upload() ğŸŸ¦ í•„ìˆ˜ ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨   â”‚ â”‚
â”‚  â”‚ â€¢ test_file_upload_with_post_creation() ğŸŸ¦ í•„ìˆ˜ ğŸ”´ ê³ ê¸‰  â”‚ â”‚
â”‚  â”‚ â€¢ test_multiple_files_upload() ğŸŸ¡ ê¶Œì¥ ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚
â”‚  ğŸŒŸ ì‹œë‚˜ë¦¬ì˜¤ 2: "ëŒ“ê¸€ì— ì´ë¯¸ì§€ ì²¨ë¶€"                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì‚¬ìš©ì í–‰ë™: ëŒ“ê¸€ ì‘ì„± â†’ ì´ë¯¸ì§€ ì²¨ë¶€ (1ê°œ ì œí•œ)          â”‚ â”‚
â”‚  â”‚ ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                           â”‚ â”‚
â”‚  â”‚ â€¢ test_single_file_comment_attachment() ğŸŸ¦ í•„ìˆ˜ ğŸŸ¡ ì¤‘ê¸‰  â”‚ â”‚
â”‚  â”‚ â€¢ test_comment_file_count_limit() ğŸŸ¦ í•„ìˆ˜ ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚
â”‚  ğŸŒŸ ì‹œë‚˜ë¦¬ì˜¤ 3: "í”„ë¡œí•„ ì´ë¯¸ì§€ ì„¤ì •"                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì‚¬ìš©ì í–‰ë™: ì„¤ì • í˜ì´ì§€ â†’ í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ           â”‚ â”‚
â”‚  â”‚ ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                           â”‚ â”‚
â”‚  â”‚ â€¢ test_profile_image_upload() ğŸŸ¦ í•„ìˆ˜ ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨     â”‚ â”‚
â”‚  â”‚ â€¢ test_profile_image_replacement() ğŸŸ¡ ê¶Œì¥ ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤ (Error Cases)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤ â†’ í…ŒìŠ¤íŠ¸ ë§¤í•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                          â”‚
â”‚  âš ï¸ ì‹œë‚˜ë¦¬ì˜¤ 1: "íŒŒì¼ í¬ê¸° ì´ˆê³¼"                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì‚¬ìš©ì í–‰ë™: 6MB ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œë„                    â”‚ â”‚
â”‚  â”‚ ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                         â”‚ â”‚
â”‚  â”‚ â€¢ test_oversized_file_rejection() ğŸŸ¦ í•„ìˆ˜ ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬ â”‚ â”‚
â”‚  â”‚ â€¢ test_file_size_error_message() ğŸŸ¦ í•„ìˆ˜ ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  âš ï¸ ì‹œë‚˜ë¦¬ì˜¤ 2: "ì§€ì›ë˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹"                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì‚¬ìš©ì í–‰ë™: PDF, EXE íŒŒì¼ ì—…ë¡œë“œ ì‹œë„                 â”‚ â”‚
â”‚  â”‚ ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                         â”‚ â”‚
â”‚  â”‚ â€¢ test_unsupported_file_type_rejection() ğŸŸ¦ í•„ìˆ˜ ğŸŸ¢ ì´ˆê¸‰ â”‚ â”‚
â”‚  â”‚ â€¢ test_malicious_file_detection() ğŸŸ¦ í•„ìˆ˜ ğŸ”´ ê³ ê¸‰ âš¡ë³‘ë ¬  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  âš ï¸ ì‹œë‚˜ë¦¬ì˜¤ 3: "íŒŒì¼ ê°œìˆ˜ ì œí•œ ì´ˆê³¼"                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì‚¬ìš©ì í–‰ë™: ê²Œì‹œê¸€ì— 6ê°œ ì´ë¯¸ì§€ ì²¨ë¶€ ì‹œë„              â”‚ â”‚
â”‚  â”‚ ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                         â”‚ â”‚
â”‚  â”‚ â€¢ test_post_file_count_limit() ğŸŸ¦ í•„ìˆ˜ ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬    â”‚ â”‚
â”‚  â”‚ â€¢ test_file_count_exceeded_error() ğŸŸ¦ í•„ìˆ˜ ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ì˜ˆì™¸ ì‹œë‚˜ë¦¬ì˜¤ (Edge Cases)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì˜ˆì™¸ ì‹œë‚˜ë¦¬ì˜¤ â†’ í…ŒìŠ¤íŠ¸ ë§¤í•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                          â”‚
â”‚  ğŸ”§ ì‹œë‚˜ë¦¬ì˜¤ 1: "ë™ì‹œ íŒŒì¼ ì—…ë¡œë“œ"                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ìƒí™©: ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— íŒŒì¼ ì—…ë¡œë“œ                  â”‚ â”‚
â”‚  â”‚ ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                         â”‚ â”‚
â”‚  â”‚ â€¢ test_concurrent_upload_handling() ğŸŸ¡ ê¶Œì¥ ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â€¢ test_race_condition_prevention() ğŸŸ¢ ì„ íƒ ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  ğŸ”§ ì‹œë‚˜ë¦¬ì˜¤ 2: "ë„¤íŠ¸ì›Œí¬ ì¥ì•  ì¤‘ ì—…ë¡œë“œ"                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ìƒí™©: ì—…ë¡œë“œ ì¤‘ ì—°ê²° ëŠê¹€, íƒ€ì„ì•„ì›ƒ                     â”‚ â”‚
â”‚  â”‚ ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                         â”‚ â”‚
â”‚  â”‚ â€¢ test_upload_timeout_handling() ğŸŸ¡ ê¶Œì¥ ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨  â”‚ â”‚
â”‚  â”‚ â€¢ test_partial_upload_cleanup() ğŸŸ¡ ê¶Œì¥ ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  ğŸ”§ ì‹œë‚˜ë¦¬ì˜¤ 3: "ì €ì¥ ê³µê°„ ë¶€ì¡±"                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ìƒí™©: ì„œë²„ ë””ìŠ¤í¬ ê³µê°„ ë¶€ì¡±ìœ¼ë¡œ ì €ì¥ ì‹¤íŒ¨               â”‚ â”‚
â”‚  â”‚ ê´€ë ¨ í…ŒìŠ¤íŠ¸:                                         â”‚ â”‚
â”‚  â”‚ â€¢ test_storage_full_handling() ğŸŸ¡ ê¶Œì¥ ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨    â”‚ â”‚
â”‚  â”‚ â€¢ test_graceful_storage_failure() ğŸŸ¢ ì„ íƒ ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. êµ¬í˜„ ìˆœì„œ ì œì•ˆ

### 6.1 3ë‹¨ê³„ êµ¬í˜„ ë¡œë“œë§µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ êµ¬í˜„ ë‹¨ê³„ë³„ ë¡œë“œë§µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                   â”‚
â”‚  1ï¸âƒ£ 1ë‹¨ê³„: ğŸŸ¦ í•„ìˆ˜ (MVP) - ì‹œìŠ¤í…œ ì•ˆì •ì„± í•µì‹¬     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“‹ íŒŒì¼ ê²€ì¦ (File Validation)               â”‚ â”‚
â”‚  â”‚ â‘  test_file_size_validation() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬   â”‚ â”‚
â”‚  â”‚ â‘¡ test_file_type_validation() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬   â”‚ â”‚
â”‚  â”‚ â‘¢ test_mime_type_security_check() ğŸ”´ ê³ ê¸‰ âš¡ë³‘ë ¬ â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ’¾ íŒŒì¼ ì €ì¥ (File Storage)                 â”‚ â”‚
â”‚  â”‚ â‘£ test_generate_file_path() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬     â”‚ â”‚
â”‚  â”‚ â‘¤ test_save_file_to_disk() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨     â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸ (Core APIs)               â”‚ â”‚
â”‚  â”‚ â‘¥ test_successful_file_upload() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘¦ test_file_download_by_id() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨   â”‚ â”‚
â”‚  â”‚ â‘§ test_upload_request_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘¨ test_upload_response_contract() ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ âš ï¸ ê¸°ë³¸ ì˜¤ë¥˜ ì²˜ë¦¬ (Essential Error Handling) â”‚ â”‚
â”‚  â”‚ â‘© test_oversized_file_rejection() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬ â”‚ â”‚
â”‚  â”‚ â‘ª test_unsupported_file_type_rejection() ğŸŸ¢ ì´ˆê¸‰ â”‚ â”‚
â”‚  â”‚ â‘« test_file_not_found_error() ğŸŸ¢ ì´ˆê¸‰ âš¡ë³‘ë ¬    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                   â”‚
â”‚  2ï¸âƒ£ 2ë‹¨ê³„: ğŸŸ¡ ê¶Œì¥ (ì•ˆì •í™”) - ì‚¬ìš©ì ê²½í—˜ ê°œì„     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“‹ ê³ ê¸‰ íŒŒì¼ ì²˜ë¦¬ (Advanced File Handling)   â”‚ â”‚
â”‚  â”‚ â‘  test_extract_file_metadata() ğŸŸ¡ ì¤‘ê¸‰ âš¡ë³‘ë ¬   â”‚ â”‚
â”‚  â”‚ â‘¡ test_multiple_files_upload() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨  â”‚ â”‚
â”‚  â”‚ â‘¢ test_file_upload_with_post_creation() ğŸ”´ ê³ ê¸‰ â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ—‘ï¸ íŒŒì¼ ê´€ë¦¬ (File Management)              â”‚ â”‚
â”‚  â”‚ â‘£ test_file_deletion_workflow() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘¤ test_reference_cleanup() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨     â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ âš ï¸ ê³ ê¸‰ ì˜¤ë¥˜ ì²˜ë¦¬ (Advanced Error Handling)  â”‚ â”‚
â”‚  â”‚ â‘¥ test_upload_timeout_handling() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘¦ test_storage_full_handling() ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨  â”‚ â”‚
â”‚  â”‚ â‘§ test_malicious_file_detection() ğŸ”´ ê³ ê¸‰ âš¡ë³‘ë ¬ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                   â”‚
â”‚  3ï¸âƒ£ 3ë‹¨ê³„: ğŸŸ¢ ì„ íƒ (ìµœì í™”) - ê³ ê¸‰ ê¸°ëŠ¥          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸš€ ì„±ëŠ¥ ìµœì í™” (Performance)                â”‚ â”‚
â”‚  â”‚ â‘  test_concurrent_upload_handling() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘¡ test_cached_file_response() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨   â”‚ â”‚
â”‚  â”‚ â‘¢ test_large_file_handling() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨    â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ”’ ë³´ì•ˆ ê°•í™” (Security Enhancement)         â”‚ â”‚
â”‚  â”‚ â‘£ test_rate_limiting_enforcement() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘¤ test_file_access_permission() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚                                             â”‚ â”‚
â”‚  â”‚ ğŸ› ï¸ ìš´ì˜ ì§€ì› (Operations Support)           â”‚ â”‚
â”‚  â”‚ â‘¥ test_orphaned_file_handling() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â”‚ â‘¦ test_file_system_monitoring() ğŸ”´ ê³ ê¸‰ ğŸ”„ìˆœì°¨ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                   â”‚
â”‚  ğŸ’¡ êµ¬í˜„ íŒ:                                    â”‚
â”‚  â€¢ âš¡ë³‘ë ¬: ë…ë¦½ì  ì‹¤í–‰ ê°€ëŠ¥ (ìƒíƒœ ë³€ê²½ ì—†ìŒ)        â”‚
â”‚  â€¢ ğŸ”„ìˆœì°¨: ìˆœì°¨ ì‹¤í–‰ í•„ìš” (ê³µìœ  ë¦¬ì†ŒìŠ¤ ì‚¬ìš©)       â”‚
â”‚  â€¢ ğŸŸ¢ ì´ˆê¸‰ â†’ ğŸŸ¡ ì¤‘ê¸‰ â†’ ğŸ”´ ê³ ê¸‰ ìˆœì„œë¡œ ì§„í–‰       â”‚
â”‚  â€¢ ê° ë‹¨ê³„ ì™„ë£Œ í›„ í”„ë¡ íŠ¸ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸ ìˆ˜í–‰      â”‚
â”‚  â€¢ ğŸŸ¦ í•„ìˆ˜ ì™„ë£Œ ì‹œì ì—ì„œ MVP ë°°í¬ ê°€ëŠ¥           â”‚
â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ë‹¨ê³„ë³„ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

**1ë‹¨ê³„ ì™„ë£Œ í›„ ê²€ì¦:**
```python
# í”„ë¡ íŠ¸ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸ - MVP ê¸°ëŠ¥ ê²€ì¦
def verify_mvp_file_functionality():
    """
    ê²€ì¦ í•­ëª©:
    1. ì´ë¯¸ì§€ ì—…ë¡œë“œ â†’ ê²Œì‹œê¸€ ì‘ì„± â†’ ì´ë¯¸ì§€ í‘œì‹œ ì „ì²´ í”Œë¡œìš°
    2. íŒŒì¼ í¬ê¸°/í˜•ì‹ ì œí•œ ì‹œ ì ì ˆí•œ ì‚¬ìš©ì ë©”ì‹œì§€
    3. ì—…ë¡œë“œëœ íŒŒì¼ ë¸Œë¼ìš°ì €ì—ì„œ ì •ìƒ í‘œì‹œ
    4. ê¸°ë³¸ì ì¸ ì˜¤ë¥˜ ìƒí™© ì²˜ë¦¬
    """
    pass
```

**2ë‹¨ê³„ ì™„ë£Œ í›„ ê²€ì¦:**
```python
# ì•ˆì •ì„± ê²€ì¦ - ë‹¤ì–‘í•œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤
def verify_stability_enhancements():
    """
    ê²€ì¦ í•­ëª©:
    1. ì—¬ëŸ¬ íŒŒì¼ ë™ì‹œ ì—…ë¡œë“œ ì‹œ UI ì•ˆì •ì„±
    2. íŒŒì¼ ì‚­ì œ í›„ ê²Œì‹œê¸€/ëŒ“ê¸€ì—ì„œ ì •ìƒ ì œê±°
    3. ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ì‚¬ìš©ì ê²½í—˜
    4. ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ì‹œ ì§„í–‰ë¥  í‘œì‹œ
    """
    pass
```

---

## 7. API ê³„ì•½ í…ŒìŠ¤íŠ¸ ì„¤ê³„

### 7.1 MVP ìˆ˜ì¤€ ê³„ì•½ ê²€ì¦

```python
# MVP API ê³„ì•½ ê²€ì¦ í—¬í¼
def assert_file_api_basic_contract(response, endpoint_type="upload"):
    """
    MVP API ê³„ì•½ ìµœì†Œ ê²€ì¦
    
    ê³µí†µ ê²€ì¦:
    - HTTP ìƒíƒœ ì½”ë“œ ì ì ˆì„±
    - Content-Type: application/json
    - ì‘ë‹µ ì‹œê°„ < 5ì´ˆ
    
    ì—”ë“œí¬ì¸íŠ¸ë³„ ê²€ì¦:
    - upload: file_id, file_url í•„ìˆ˜ í•„ë“œ
    - info: ë©”íƒ€ë°ì´í„° ì™„ì„±ë„
    - download: ì ì ˆí•œ Content-Type í—¤ë”
    """
    pass
```

### 7.2 ê³„ì•½ í…ŒìŠ¤íŠ¸ í•­ëª©

```python
# ğŸŸ¦ í•„ìˆ˜ (MVP) - API ê³„ì•½
def test_upload_request_contract():
    """
    ì—…ë¡œë“œ ìš”ì²­ ê³„ì•½ ê²€ì¦ ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨
    
    ê²€ì¦ í•­ëª©:
    - Content-Type: multipart/form-data
    - í•„ìˆ˜ í•„ë“œ: file, attachment_type
    - ì„ íƒ í•„ë“œ: attached_to_id
    - Authorization í—¤ë” í•„ìš”
    """
    pass

def test_upload_response_contract():
    """
    ì—…ë¡œë“œ ì‘ë‹µ ê³„ì•½ ê²€ì¦ ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨
    
    ê²€ì¦ í•­ëª©:
    - HTTP 201 Created
    - í•„ìˆ˜ í•„ë“œ: file_id, file_url, created_at
    - ë°ì´í„° íƒ€ì…: file_id(string), file_size(number)
    - ISO 8601 ë‚ ì§œ í˜•ì‹
    """
    pass

def test_error_response_contract():
    """
    ì˜¤ë¥˜ ì‘ë‹µ ê³„ì•½ ê²€ì¦ ğŸŸ¡ ì¤‘ê¸‰ ğŸ”„ìˆœì°¨
    
    ê²€ì¦ í•­ëª©:
    - í‘œì¤€ ì˜¤ë¥˜ êµ¬ì¡°: {error: {code, message, details}}
    - ì ì ˆí•œ HTTP ìƒíƒœ ì½”ë“œ
    - ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€
    - timestamp, path í•„ë“œ í¬í•¨
    """
    pass

def test_file_url_format_contract():
    """
    íŒŒì¼ URL í˜•ì‹ ê³„ì•½ ê²€ì¦ ğŸŸ¢ ì´ˆê¸‰ ğŸ”„ìˆœì°¨
    
    ê²€ì¦ í•­ëª©:
    - URL íŒ¨í„´: /api/files/{file_id}
    - file_idëŠ” ìœ íš¨í•œ MongoDB ObjectId
    - HTTP/HTTPS í”„ë¡œí† ì½œ ì§€ì›
    - ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥
    """
    pass
```

### 7.3 í–¥í›„ í™•ì¥ ëŒ€ë¹„ ê³„ì•½ ê¸°ë¡

```python
def record_api_contract_for_future(endpoint, request, response):
    """
    í–¥í›„ ë³¸ê²© ê³„ì•½ í…ŒìŠ¤íŠ¸ìš© API ëª…ì„¸ ê¸°ë¡
    
    ê¸°ë¡ í•­ëª©:
    - ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆ
    - ì˜¤ë¥˜ ì½”ë“œ ë§¤í•‘
    - ì„±ëŠ¥ ê¸°ì¤€ (ì‘ë‹µ ì‹œê°„)
    - ë²„ì „ í˜¸í™˜ì„± ì •ë³´
    """
    pass
```

---

## 8. í…ŒìŠ¤íŠ¸ í™˜ê²½ ë° ì„¤ì •

### 8.1 í…ŒìŠ¤íŠ¸ ë°ì´í„° ê´€ë¦¬

```python
# í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜ ì„¤ê³„
@pytest.fixture
def sample_image_files():
    """
    ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ìš© ìƒ˜í”Œ íŒŒì¼ë“¤
    
    í¬í•¨ íŒŒì¼:
    - valid_image.jpg (1MB, ì •ìƒ)
    - large_image.jpg (6MB, í¬ê¸° ì´ˆê³¼)
    - invalid_file.txt (í…ìŠ¤íŠ¸ íŒŒì¼)
    - empty_file.jpg (0ë°”ì´íŠ¸)
    - malicious_file.exe (ì•…ì„± íŒŒì¼)
    """
    pass

@pytest.fixture
def temp_upload_directory():
    """í…ŒìŠ¤íŠ¸ìš© ì„ì‹œ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬"""
    pass

@pytest.fixture
def test_user_tokens():
    """ë‹¤ì–‘í•œ ê¶Œí•œ ìˆ˜ì¤€ì˜ í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì í† í°"""
    pass
```

### 8.2 Mock ì‚¬ìš© ì •ì±…

```python
# ğŸš¨ Mock ì‚¬ìš© ê¸°ì¤€
def test_file_upload_with_external_service():
    """
    ğŸš¨ Mock ì‚¬ìš©: EmailNotificationService
    ì´ìœ : ì™¸ë¶€ SMTP ì„œë²„ í˜¸ì¶œë¡œ ì¸í•œ ë„¤íŠ¸ì›Œí¬ ì˜ì¡´ì„±
    ëŒ€ì•ˆ: ì‹¤ì œ ì´ë©”ì¼ ë°œì†¡ ì—†ì´ ì—…ë¡œë“œ ì™„ë£Œ ì•Œë¦¼ ë¡œì§ í…ŒìŠ¤íŠ¸
    """
    # ì´ë¯¸ êµ¬í˜„ ì™„ë£Œëœ EmailServiceë¥¼ Mockìœ¼ë¡œ ì²˜ë¦¬
    pass

def test_virus_scanning_integration():
    """
    ğŸš¨ Mock ì‚¬ìš©: AntiVirusService
    ì´ìœ : ì™¸ë¶€ ë°”ì´ëŸ¬ìŠ¤ ìŠ¤ìº” API í˜¸ì¶œ ë¹„ìš© ë° ì‹œê°„
    ëŒ€ì•ˆ: ìŠ¤ìº” ê²°ê³¼ë³„ íŒŒì¼ ì²˜ë¦¬ ë¡œì§ì— ì§‘ì¤‘
    """
    pass
```

### 8.3 í…ŒìŠ¤íŠ¸ ì „í›„ ìƒíƒœ ê´€ë¦¬

```python
# í…ŒìŠ¤íŠ¸ ìƒíƒœ ê´€ë¦¬ ì˜ˆì‹œ
def test_file_upload_state_management():
    """
    í…ŒìŠ¤íŠ¸ ì „ ìƒíƒœ:
    - ë¹ˆ uploads/ ë””ë ‰í† ë¦¬
    - ë¹ˆ files ì»¬ë ‰ì…˜
    - ì¸ì¦ëœ ì‚¬ìš©ì ì„¸ì…˜
    
    ì‹¤í–‰ ì‘ì—…:
    - 1MB ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œ
    - ë©”íƒ€ë°ì´í„° DB ì €ì¥
    
    í…ŒìŠ¤íŠ¸ í›„ ìƒíƒœ:
    - uploads/2024/01/posts/ ë””ë ‰í† ë¦¬ì— íŒŒì¼ ì¡´ì¬
    - files ì»¬ë ‰ì…˜ì— ë¬¸ì„œ 1ê°œ ìƒì„±
    - ì‚¬ìš©ì ì—…ë¡œë“œ í†µê³„ +1
    
    ì •ë¦¬ ì‘ì—…:
    - ì—…ë¡œë“œëœ íŒŒì¼ ì‚­ì œ
    - DB ë¬¸ì„œ ì‚­ì œ
    - ì‚¬ìš©ì í†µê³„ ì›ë³µ
    """
    pass
```

### 8.4 ë³‘ë ¬ ì‹¤í–‰ ìµœì í™”

```python
# ë³‘ë ¬ ì‹¤í–‰ ê°€ëŠ¥ í…ŒìŠ¤íŠ¸ (âš¡)
def test_file_validation_parallel():
    """ë…ë¦½ì  ê²€ì¦ ë¡œì§, ìƒíƒœ ë³€ê²½ ì—†ìŒ"""
    pass

# ìˆœì°¨ ì‹¤í–‰ í•„ìš” í…ŒìŠ¤íŠ¸ (ğŸ”„)
def test_file_storage_sequential():
    """íŒŒì¼ ì‹œìŠ¤í…œ ë° DB ë³€ê²½, ê³µìœ  ë¦¬ì†ŒìŠ¤ ì‚¬ìš©"""
    pass
```

---

## ê²°ë¡ 

ì´ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì œì•ˆì€ íŒŒì¼ APIì˜ ì•ˆì •ì ì´ê³  ì ì§„ì ì¸ êµ¬í˜„ì„ ìœ„í•œ ì²´ê³„ì ì¸ ì ‘ê·¼ ë°©ì‹ì„ ì œê³µí•©ë‹ˆë‹¤. Classic TDD ì›ì¹™ì„ ì¤€ìˆ˜í•˜ë©´ì„œë„ ì‹¤ì œ ì‚¬ìš©ì í”Œë¡œìš°ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í•œ ì‹¤ìš©ì ì¸ í…ŒìŠ¤íŠ¸ ì „ëµì„ í†µí•´, MVPë¶€í„° ê³ ê¸‰ ê¸°ëŠ¥ê¹Œì§€ ë‹¨ê³„ë³„ë¡œ ì•ˆì „í•˜ê²Œ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

**í•µì‹¬ íŠ¹ì§•:**
- ğŸŸ¦ í•„ìˆ˜ â†’ ğŸŸ¡ ê¶Œì¥ â†’ ğŸŸ¢ ì„ íƒ ë‹¨ê³„ë³„ ìš°ì„ ìˆœìœ„
- ğŸŸ¢ ì´ˆê¸‰ â†’ ğŸŸ¡ ì¤‘ê¸‰ â†’ ğŸ”´ ê³ ê¸‰ ë‚œì´ë„ë³„ ì ‘ê·¼
- âš¡ ë³‘ë ¬ / ğŸ”„ ìˆœì°¨ ì‹¤í–‰ ìµœì í™”
- Classic TDD ì›ì¹™ ì¤€ìˆ˜ (ìµœì†Œ Mock ì‚¬ìš©)
- ì‚¬ìš©ì í”Œë¡œìš° ì¤‘ì‹¬ ê²€ì¦