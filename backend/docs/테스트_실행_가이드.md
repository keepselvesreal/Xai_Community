# í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

ì´ ë¬¸ì„œëŠ” Xai Community ë°±ì—”ë“œì˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì™„ì „í•œ ê°€ì´ë“œì…ë‹ˆë‹¤. ê°œë°œìê°€ ë¡œì»¬ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜, CI/CD íŒŒì´í”„ë¼ì¸ì—ì„œ ìë™í™”ëœ í…ŒìŠ¤íŠ¸ë¥¼ ì„¤ì •í•  ë•Œ ì°¸ê³ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ëŒ€ìƒ ë…ì**: ë°±ì—”ë“œ ê°œë°œì, QA ì—”ì§€ë‹ˆì–´, DevOps ì—”ì§€ë‹ˆì–´  
**í™˜ê²½**: Python 3.11+, MongoDB 6.0+, uv package manager  
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-06-27

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ë°±ì—”ë“œ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd backend

# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
make test

# íŠ¹ì • ì¢…ë¥˜ì˜ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
make test-unit          # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë§Œ
make test-integration   # í†µí•© í…ŒìŠ¤íŠ¸ë§Œ
make test-cov          # ì»¤ë²„ë¦¬ì§€ í¬í•¨ í…ŒìŠ¤íŠ¸
```

### ê°œë³„ í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‹¤í–‰
```bash
# íŠ¹ì • í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‹¤í–‰
uv run pytest tests/unit/test_auth_service.py -v

# íŠ¹ì • í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ì‹¤í–‰
uv run pytest tests/unit/test_auth_service.py::TestAuthService -v

# íŠ¹ì • í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ì‹¤í–‰
uv run pytest tests/unit/test_auth_service.py::TestAuthService::test_create_user -v
```

## ğŸ”§ í™˜ê²½ ì„¤ì •

### 1. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
# uvë¥¼ ì‚¬ìš©í•œ ì˜ì¡´ì„± ì„¤ì¹˜
cd backend
uv sync --all-extras

# ë˜ëŠ” pip ì‚¬ìš© (ê¶Œì¥í•˜ì§€ ì•ŠìŒ)
pip install -e .[test]
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
# config/.env.test íŒŒì¼ ìƒì„±
cat > config/.env.test << 'EOF'
# í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •
ENVIRONMENT=testing
SECRET_KEY=test-secret-key-32-characters-long-for-testing
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# í…ŒìŠ¤íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
MONGODB_URL=mongodb://localhost:27017
DATABASE_NAME=xai_community_test

# ë¡œê¹… ì„¤ì •
LOG_LEVEL=INFO

# CORS ì„¤ì • (í…ŒìŠ¤íŠ¸ìš©)
CORS_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]

# íŒŒì¼ ì—…ë¡œë“œ ì„¤ì •
MAX_FILE_SIZE=5242880  # 5MB
ALLOWED_FILE_TYPES=["image/jpeg", "image/png", "image/gif", "image/webp"]
UPLOAD_DIR=uploads/test
EOF
```

### 3. í…ŒìŠ¤íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
```bash
# MongoDB ì‹¤í–‰ (Docker ì‚¬ìš© ì‹œ)
docker run -d --name mongodb-test -p 27017:27017 mongo:6.0

# ë˜ëŠ” ë¡œì»¬ MongoDB ì‚¬ìš©
mongod --dbpath /path/to/test/db --port 27017
```

## ğŸ“‚ í…ŒìŠ¤íŠ¸ êµ¬ì¡°

### ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
tests/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ conftest.py                 # ê³µí†µ í”½ìŠ¤ì²˜
â”œâ”€â”€ unit/                       # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_auth_service.py
â”‚   â”œâ”€â”€ test_posts_service.py
â”‚   â”œâ”€â”€ test_comments_service.py
â”‚   â”œâ”€â”€ test_file_*.py
â”‚   â””â”€â”€ ...
â”œâ”€â”€ integration/                # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_auth_router.py
â”‚   â”œâ”€â”€ test_posts_router.py
â”‚   â”œâ”€â”€ test_comments_router.py
â”‚   â””â”€â”€ ...
â”œâ”€â”€ contract/                   # ê³„ì•½ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_file_api_contract.py
â”‚   â””â”€â”€ test_editor_api_contract.py
â”œâ”€â”€ security/                   # ë³´ì•ˆ í…ŒìŠ¤íŠ¸ (ì¶”ê°€ ì˜ˆì •)
â”‚   â”œâ”€â”€ test_xss_prevention.py
â”‚   â””â”€â”€ test_auth_security.py
â””â”€â”€ performance/                # ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (ì¶”ê°€ ì˜ˆì •)
    â”œâ”€â”€ test_api_performance.py
    â””â”€â”€ test_database_performance.py
```

### í…ŒìŠ¤íŠ¸ ë§ˆì»¤ (Markers)
```python
# pytest.iniì— ì •ì˜ëœ ë§ˆì»¤ë“¤
@pytest.mark.unit          # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
@pytest.mark.integration   # í†µí•© í…ŒìŠ¤íŠ¸
@pytest.mark.security      # ë³´ì•ˆ í…ŒìŠ¤íŠ¸
@pytest.mark.performance   # ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
@pytest.mark.slow          # ëŠë¦° í…ŒìŠ¤íŠ¸ (5ì´ˆ ì´ìƒ)
```

## ğŸ¯ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë°©ë²•

### 1. ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´

#### Makefile ì‚¬ìš© (ê¶Œì¥)
```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
make test

# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
make test-unit

# í†µí•© í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰  
make test-integration

# ì»¤ë²„ë¦¬ì§€ í¬í•¨ í…ŒìŠ¤íŠ¸
make test-cov

# ë¦°íŒ… ë° í¬ë§· ì²´í¬
make lint
make format-check

# ì½”ë“œ í¬ë§·íŒ…
make format

# ì „ì²´ ì •ë¦¬
make clean
```

#### pytest ì§ì ‘ ì‚¬ìš©
```bash
# ê¸°ë³¸ ì‹¤í–‰
uv run pytest

# ìƒì„¸ ì¶œë ¥
uv run pytest -v

# íŠ¹ì • ë§ˆì»¤ë§Œ ì‹¤í–‰
uv run pytest -m unit
uv run pytest -m integration
uv run pytest -m "not slow"

# ë³‘ë ¬ ì‹¤í–‰ (pytest-xdist ì„¤ì¹˜ ì‹œ)
uv run pytest -n auto

# ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨
uv run pytest -x

# ë§ˆì§€ë§‰ ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ë§Œ ì¬ì‹¤í–‰
uv run pytest --lf
```

### 2. ì»¤ë²„ë¦¬ì§€ í…ŒìŠ¤íŠ¸

#### ê¸°ë³¸ ì»¤ë²„ë¦¬ì§€
```bash
# HTML ë¦¬í¬íŠ¸ ìƒì„±
uv run pytest --cov=src --cov-report=html

# í„°ë¯¸ë„ì—ì„œ ëˆ„ë½ëœ ë¼ì¸ í‘œì‹œ
uv run pytest --cov=src --cov-report=term-missing

# ì»¤ë²„ë¦¬ì§€ ìµœì†Œ ê¸°ì¤€ ì„¤ì •
uv run pytest --cov=src --cov-fail-under=85
```

#### ìƒì„¸ ì»¤ë²„ë¦¬ì§€ ë¶„ì„
```bash
# íŠ¹ì • ëª¨ë“ˆì˜ ì»¤ë²„ë¦¬ì§€ë§Œ í™•ì¸
uv run pytest --cov=src.services --cov-report=term-missing

# ì»¤ë²„ë¦¬ì§€ ë°ì´í„° íŒŒì¼ ìƒì„±
uv run pytest --cov=src --cov-report=xml

# ë¸Œëœì¹˜ ì»¤ë²„ë¦¬ì§€ í¬í•¨
uv run pytest --cov=src --cov-branch --cov-report=term-missing
```

### 3. ê°œë°œ ì¤‘ í…ŒìŠ¤íŠ¸

#### íŒŒì¼ ë³€ê²½ ê°ì§€ í…ŒìŠ¤íŠ¸
```bash
# pytest-watch ì„¤ì¹˜ í›„
pip install pytest-watch

# íŒŒì¼ ë³€ê²½ ì‹œ ìë™ ì¬ì‹¤í–‰
ptw -- tests/unit/

# íŠ¹ì • íŒŒì¼ë§Œ ê°ì‹œ
ptw tests/unit/test_auth_service.py
```

#### ë¹ ë¥¸ í”¼ë“œë°±ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸
```bash
# ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ë§Œ ì¬ì‹¤í–‰
uv run pytest --lf -v

# íŠ¹ì • í‚¤ì›Œë“œ í¬í•¨ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
uv run pytest -k "auth and login" -v

# ê°€ì¥ ëŠë¦° 10ê°œ í…ŒìŠ¤íŠ¸ í‘œì‹œ
uv run pytest --durations=10
```

### 4. ë””ë²„ê¹…ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸

#### ë””ë²„ê·¸ ì •ë³´ í¬í•¨ ì‹¤í–‰
```bash
# ìƒì„¸í•œ ì¶œë ¥ê³¼ í•¨ê»˜
uv run pytest -vv

# stdout ì¶œë ¥ ìº¡ì²˜ ë¹„í™œì„±í™”
uv run pytest -s

# ë¡œê¹… ì¶œë ¥ í‘œì‹œ
uv run pytest --log-cli-level=INFO

# PDB ë””ë²„ê±° ì‚¬ìš©
uv run pytest --pdb
```

#### íŠ¹ì • í…ŒìŠ¤íŠ¸ ë””ë²„ê¹…
```bash
# ë‹¨ì¼ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ì‹¤í–‰
uv run pytest tests/unit/test_auth_service.py::test_create_user -s -vv

# ì‹¤íŒ¨ ì‹œ PDB ì§„ì…
uv run pytest tests/unit/test_auth_service.py::test_create_user --pdb-trace
```

## ğŸ”¨ í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

### 1. í…ŒìŠ¤íŠ¸ íŒŒì¼ ëª…ëª… ê·œì¹™
```python
# íŒŒì¼ëª…: test_{ëª¨ë“ˆëª…}.py
test_auth_service.py       # src/services/auth_service.py í…ŒìŠ¤íŠ¸
test_user_repository.py    # src/repositories/user_repository.py í…ŒìŠ¤íŠ¸
test_posts_router.py       # src/routers/posts.py í…ŒìŠ¤íŠ¸
```

### 2. í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ë° í•¨ìˆ˜ ëª…ëª…
```python
class TestAuthService:
    """AuthService í´ë˜ìŠ¤ì˜ í…ŒìŠ¤íŠ¸"""
    
    def test_create_user_success(self):
        """ì‚¬ìš©ì ìƒì„± ì„±ê³µ ì‹œë‚˜ë¦¬ì˜¤"""
        pass
    
    def test_create_user_duplicate_email(self):
        """ì¤‘ë³µ ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ìƒì„± ì‹œ ì‹¤íŒ¨"""
        pass
    
    def test_create_user_invalid_password(self):
        """ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ë¡œ ì‚¬ìš©ì ìƒì„± ì‹œ ì‹¤íŒ¨"""
        pass
```

### 3. í”½ìŠ¤ì²˜ ì‚¬ìš© ì˜ˆì‹œ
```python
# tests/conftest.pyì—ì„œ ì •ì˜ëœ í”½ìŠ¤ì²˜ ì‚¬ìš©
@pytest.mark.asyncio
async def test_create_post(authenticated_client, test_user):
    """ê²Œì‹œê¸€ ìƒì„± í…ŒìŠ¤íŠ¸"""
    post_data = {
        "title": "Test Post",
        "content": "This is a test post",
        "service_type": "general"
    }
    
    response = await authenticated_client.post("/api/posts", json=post_data)
    assert response.status_code == 201
    assert response.json()["title"] == "Test Post"
```

### 4. Mock ì‚¬ìš© ì˜ˆì‹œ
```python
from unittest.mock import patch, AsyncMock

@patch('src.services.email_service.send_email')
async def test_user_registration_with_email(mock_send_email, client):
    """ì´ë©”ì¼ ë°œì†¡ì„ í¬í•¨í•œ ì‚¬ìš©ì ë“±ë¡ í…ŒìŠ¤íŠ¸"""
    mock_send_email.return_value = True
    
    user_data = {
        "email": "test@example.com",
        "password": "password123",
        "user_handle": "testuser"
    }
    
    response = await client.post("/register", json=user_data)
    assert response.status_code == 201
    mock_send_email.assert_called_once()
```

## ğŸš¨ ë¬¸ì œ í•´ê²°

### ìì£¼ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜

#### 1. Import ì˜¤ë¥˜
```bash
# ì˜¤ë¥˜: ModuleNotFoundError
# í•´ê²°: PYTHONPATH ì„¤ì •
export PYTHONPATH="${PYTHONPATH}:$(pwd)/src"
uv run pytest

# ë˜ëŠ” -e ì˜µì…˜ìœ¼ë¡œ ì„¤ì¹˜
uv pip install -e .
```

#### 2. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜
```bash
# ì˜¤ë¥˜: pymongo.errors.ServerSelectionTimeoutError
# í•´ê²°: MongoDB ì‹¤í–‰ í™•ì¸
docker run -d --name mongodb-test -p 27017:27017 mongo:6.0

# ì—°ê²° í…ŒìŠ¤íŠ¸
python -c "from pymongo import MongoClient; print(MongoClient('mongodb://localhost:27017').admin.command('ping'))"
```

#### 3. ì˜ì¡´ì„± ê´€ë ¨ ì˜¤ë¥˜
```bash
# ì˜¤ë¥˜: ModuleNotFoundError: No module named 'PIL'
# í•´ê²°: í…ŒìŠ¤íŠ¸ ì˜ì¡´ì„± ì„¤ì¹˜
uv add --dev pillow

# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì˜ì¡´ì„± ì¬ì„¤ì¹˜
uv sync --all-extras
```

#### 4. í™˜ê²½ ë³€ìˆ˜ ì˜¤ë¥˜
```bash
# ì˜¤ë¥˜: KeyError: 'SECRET_KEY'
# í•´ê²°: í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ í™•ì¸
ls config/.env*

# í…ŒìŠ¤íŠ¸ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
export ENVIRONMENT=testing
export SECRET_KEY=test-secret-key-32-characters-long
```

### í…ŒìŠ¤íŠ¸ ì„±ëŠ¥ ìµœì í™”

#### 1. ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
```python
# conftest.pyì—ì„œ í…ŒìŠ¤íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
@pytest.fixture(scope="session", autouse=True)
async def setup_test_database():
    """í…ŒìŠ¤íŠ¸ ì„¸ì…˜ ì‹œì‘ ì‹œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •"""
    # ì¸ë±ìŠ¤ ìƒì„±
    await create_test_indexes()
    
    yield
    
    # í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬
    await cleanup_test_data()
```

#### 2. ë³‘ë ¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# pytest-xdist ì„¤ì¹˜
uv add --dev pytest-xdist

# CPU ì½”ì–´ ìˆ˜ë§Œí¼ ë³‘ë ¬ ì‹¤í–‰
uv run pytest -n auto

# íŠ¹ì • í”„ë¡œì„¸ìŠ¤ ìˆ˜ë¡œ ì‹¤í–‰
uv run pytest -n 4
```

#### 3. í…ŒìŠ¤íŠ¸ ìºì‹±
```python
# pytest-cache ì‚¬ìš©
uv run pytest --cache-clear  # ìºì‹œ ì´ˆê¸°í™”
uv run pytest --cache-show   # ìºì‹œ ë‚´ìš© í™•ì¸
```

## ğŸ”„ CI/CD í†µí•©

### GitHub Actions ì„¤ì •
```yaml
# .github/workflows/test.yml
name: Backend Tests

on:
  push:
    branches: [ main, develop ]
    paths: [ 'backend/**' ]
  pull_request:
    branches: [ main ]
    paths: [ 'backend/**' ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    services:
      mongodb:
        image: mongo:6.0
        ports:
          - 27017:27017
        options: >-
          --health-cmd "mongosh --eval 'db.runCommand({ping: 1})'"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install uv
      uses: astral-sh/setup-uv@v1
    
    - name: Install dependencies
      run: |
        cd backend
        uv sync --all-extras
    
    - name: Run linting
      run: |
        cd backend
        uv run ruff check .
        uv run black --check .
    
    - name: Run tests
      run: |
        cd backend
        uv run pytest tests/ -v \
          --cov=src \
          --cov-report=xml \
          --cov-report=term-missing \
          --cov-fail-under=80
      env:
        MONGODB_URL: mongodb://localhost:27017
        DATABASE_NAME: xai_community_test
        SECRET_KEY: test-secret-key-32-characters-long-for-github-actions
        ENVIRONMENT: testing
    
    - name: Upload coverage to Codecov
      uses: codecov/codecov-action@v3
      with:
        file: ./backend/coverage.xml
        flags: backend
        name: backend-coverage
        fail_ci_if_error: true
```

### ë¡œì»¬ pre-commit ì„¤ì •
```yaml
# .pre-commit-config.yaml
repos:
  - repo: local
    hooks:
      - id: backend-tests
        name: Backend Tests
        entry: bash -c 'cd backend && make test-unit'
        language: system
        pass_filenames: false
        files: ^backend/
      
      - id: backend-lint
        name: Backend Linting
        entry: bash -c 'cd backend && make lint'
        language: system
        pass_filenames: false
        files: ^backend/
```

## ğŸ“Š í…ŒìŠ¤íŠ¸ ë©”íŠ¸ë¦­ìŠ¤ ëª¨ë‹ˆí„°ë§

### 1. ì»¤ë²„ë¦¬ì§€ ì¶”ì 
```bash
# ì»¤ë²„ë¦¬ì§€ íŠ¸ë Œë“œ í™•ì¸ì„ ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸
#!/bin/bash
# scripts/coverage-trend.sh

echo "Date,Total Coverage,Unit Coverage,Integration Coverage" > coverage-trend.csv

for date in $(git log --format="%ai" --since="1 month ago" | cut -d' ' -f1 | sort -u); do
    git checkout $(git rev-list -n 1 --before="$date" HEAD) 2>/dev/null
    coverage=$(uv run pytest --cov=src --cov-report=term | grep TOTAL | awk '{print $NF}' | sed 's/%//')
    echo "$date,$coverage" >> coverage-trend.csv
done

git checkout main
```

### 2. í…ŒìŠ¤íŠ¸ ì„±ëŠ¥ ì¶”ì 
```python
# tests/performance/test_metrics.py
import time
import json
from datetime import datetime

def track_test_performance():
    """í…ŒìŠ¤íŠ¸ ì„±ëŠ¥ ë©”íŠ¸ë¦­ìŠ¤ ìˆ˜ì§‘"""
    start_time = time.time()
    
    # í…ŒìŠ¤íŠ¸ ì‹¤í–‰
    result = subprocess.run(['uv', 'run', 'pytest', '-q'], 
                          capture_output=True, text=True)
    
    end_time = time.time()
    duration = end_time - start_time
    
    metrics = {
        'timestamp': datetime.now().isoformat(),
        'duration': duration,
        'test_count': len(result.stdout.split('\n')),
        'status': 'passed' if result.returncode == 0 else 'failed'
    }
    
    # ë©”íŠ¸ë¦­ìŠ¤ ì €ì¥
    with open('test-metrics.json', 'a') as f:
        f.write(json.dumps(metrics) + '\n')
```

## ğŸ“š ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. í…ŒìŠ¤íŠ¸ ê²©ë¦¬
```python
# ê° í…ŒìŠ¤íŠ¸ëŠ” ë…ë¦½ì ì´ì–´ì•¼ í•¨
@pytest.fixture(autouse=True)
async def clean_database():
    """ê° í…ŒìŠ¤íŠ¸ í›„ ë°ì´í„°ë² ì´ìŠ¤ ì •ë¦¬"""
    yield
    # í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬
    await cleanup_test_collections()
```

### 2. ì˜ë¯¸ìˆëŠ” í…ŒìŠ¤íŠ¸ ì´ë¦„
```python
# ì¢‹ì€ ì˜ˆ
def test_user_registration_fails_with_duplicate_email():
    pass

def test_post_creation_requires_authentication():
    pass

# ë‚˜ìœ ì˜ˆ
def test_user1():
    pass

def test_post():
    pass
```

### 3. AAA íŒ¨í„´ (Arrange-Act-Assert)
```python
async def test_create_post_success(authenticated_client, test_user):
    # Arrange (ì¤€ë¹„)
    post_data = {
        "title": "Test Post",
        "content": "Test Content",
        "service_type": "general"
    }
    
    # Act (ì‹¤í–‰)
    response = await authenticated_client.post("/api/posts", json=post_data)
    
    # Assert (ê²€ì¦)
    assert response.status_code == 201
    assert response.json()["title"] == "Test Post"
    assert response.json()["author_id"] == str(test_user.id)
```

### 4. ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
```python
async def test_create_post_unauthorized(client):
    """ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì˜ ê²Œì‹œê¸€ ìƒì„± ì‹œë„"""
    post_data = {
        "title": "Test Post",
        "content": "Test Content"
    }
    
    response = await client.post("/api/posts", json=post_data)
    assert response.status_code == 401
    assert "authentication required" in response.json()["detail"].lower()
```

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [í…ŒìŠ¤íŠ¸ í˜„í™© ë¶„ì„ ë³´ê³ ì„œ](./í…ŒìŠ¤íŠ¸_í˜„í™©_ë¶„ì„_ë³´ê³ ì„œ.md) - í˜„ì¬ í…ŒìŠ¤íŠ¸ ìƒíƒœ ë¶„ì„
- [íšŒê·€ í…ŒìŠ¤íŠ¸ êµ¬í˜„ ê°€ì´ë“œ](./íšŒê·€_í…ŒìŠ¤íŠ¸_êµ¬í˜„_ê°€ì´ë“œ.md) - í…ŒìŠ¤íŠ¸ êµ¬í˜„ ë°©ë²•
- [API í…ŒìŠ¤íŠ¸ ë§¤íŠ¸ë¦­ìŠ¤](./API_í…ŒìŠ¤íŠ¸_ë§¤íŠ¸ë¦­ìŠ¤.md) - ì—”ë“œí¬ì¸íŠ¸ë³„ í…ŒìŠ¤íŠ¸ í˜„í™©

---

**ì‘ì„±ì**: Claude Code  
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-06-27  
**ë‹¤ìŒ ê²€í†  ì˜ˆì •**: 2025-07-11